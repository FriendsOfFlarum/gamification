{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/gamification/./node_modules/lodash.debounce/index.js","webpack://@fof/gamification/webpack/bootstrap","webpack://@fof/gamification/webpack/runtime/compat get default export","webpack://@fof/gamification/webpack/runtime/define property getters","webpack://@fof/gamification/webpack/runtime/global","webpack://@fof/gamification/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/gamification/webpack/runtime/make namespace object","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/IndexSidebar')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/IndexPage')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/states/DiscussionListState')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/CommentPost')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/utils/PostControls')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@fof/gamification/./src/forum/components/VotesModal.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/utils/DiscussionControls')\"","webpack://@fof/gamification/./src/forum/helpers/saveVote.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/DiscussionListItem')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/abbreviateNumber')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/PostUser')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/UserCard')\"","webpack://@fof/gamification/./src/common/helpers/rankLabel.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/DiscussionPage')\"","webpack://@fof/gamification/./src/forum/addPusher.js","webpack://@fof/gamification/./src/forum/addAlternateLayout.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/Notification')\"","webpack://@fof/gamification/./src/forum/components/VoteNotification.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/SubtreeRetainer')\"","webpack://@fof/gamification/./src/forum/components/Voters.tsx","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/UserPage')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/PostsUserPage')\"","webpack://@fof/gamification/./src/forum/components/VotesUserPage.ts","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@fof/gamification/./src/common/models/Rank.ts","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/app')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/query/IGambit')\"","webpack://@fof/gamification/./src/common/gambits/HotGambit.tsx","webpack://@fof/gamification/./src/common/extend.ts","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'forum/components/PageStructure')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@fof/gamification/./src/forum/components/RankingImage.tsx","webpack://@fof/gamification/./src/forum/components/RankingsPage.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/models/Discussion')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/models/Post')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/models/User')\"","webpack://@fof/gamification/./src/forum/extend.ts","webpack://@fof/gamification/./src/forum/index.ts","webpack://@fof/gamification/./src/forum/addVoteButtons.js","webpack://@fof/gamification/./src/forum/addHotnessSort.js","webpack://@fof/gamification/./src/forum/addVotesSort.js","webpack://@fof/gamification/./src/forum/addUserInfo.js","webpack://@fof/gamification/./src/forum/addUpvotesToDiscussion.js","webpack://@fof/gamification/./src/forum/addNotifications.ts","webpack://@fof/gamification/./src/forum/addVotersToDiscussionPageSideBar.tsx","webpack://@fof/gamification/./src/forum/addUpvoteTabToUserProfile.js","webpack://@fof/gamification/./src/forum/useAlternatePostVoteLayout.tsx"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\tflarum.reg._webpack_runtimes[\"fof-gamification\"] ||= __webpack_require__;// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexSidebar');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/states/DiscussionListState');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LinkButton');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/CommentPost');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/classList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/PostControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Avatar');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/username');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Link');","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Avatar from 'flarum/common/components/Avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nexport default class VotesModal extends Modal {\n  className() {\n    return 'VotesModal Modal--small';\n  }\n  title() {\n    return app.translator.trans('fof-gamification.forum.modal.title');\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = !this.attrs.post.upvotes() || !this.attrs.post.downvotes();\n    if (this.loading) {\n      this.load();\n    }\n  }\n  content() {\n    if (this.loading) {\n      return m(\"div\", {\n        className: \"Modal-body\"\n      }, m(LoadingIndicator, null));\n    }\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"ul\", {\n      className: \"VotesModal-list\"\n    }, ['upvotes', 'downvotes'].map(type => {\n      const voters = this.attrs.post[type]();\n      if (!voters || !voters.length) return;\n      return m(\"div\", null, m(\"legend\", null, app.translator.trans(`fof-gamification.forum.modal.${type}_label`)), voters.map(user => m(\"li\", null, m(Link, {\n        href: app.route.user(user)\n      }, m(Avatar, {\n        user: user\n      }), \" \", username(user)))));\n    })));\n  }\n  load() {\n    return app.store.find('posts', this.attrs.post.id(), {\n      include: 'upvotes,downvotes'\n    }).then(this.loaded.bind(this));\n  }\n}\nflarum.reg.add('fof-gamification', 'forum/components/VotesModal', VotesModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/DiscussionControls');","import app from 'flarum/forum/app';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nexport default (function (post, upvoted, downvoted, load, discussion) {\n  if (discussion === void 0) {\n    discussion = post.discussion();\n  }\n  if (!app.session.user) {\n    // We use this instead of showing LogInModal so that extensions can override it\n    DiscussionControls.replyAction.call(discussion, true);\n    return;\n  } else if (discussion && !discussion.canVote() && !post.canVote()) {\n    return;\n  }\n  if (upvoted && downvoted) {\n    upvoted = false;\n    downvoted = false;\n  }\n  let action;\n  switch (true) {\n    case upvoted && downvoted || !upvoted && !downvoted:\n      action = null;\n      break;\n    case upvoted:\n      action = 'up';\n      break;\n    case downvoted:\n      action = 'down';\n      break;\n  }\n  if (load) load(true);\n  m.redraw();\n  return post.save({\n    vote: action\n  }).then(() => null, () => null).then(() => {\n    if (load) load(false);\n    if (discussion) {\n      discussion.pushAttributes({\n        votes: post.votes()\n      });\n    }\n    m.redraw();\n  });\n});","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/DiscussionListItem');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/abbreviateNumber');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/PostUser');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/UserCard');","export default function rankLabel(rank, attrs) {\n  if (attrs === void 0) {\n    attrs = {};\n  }\n  attrs.style = attrs.style || {};\n  attrs.className = 'rankLabel ' + (attrs.className || '');\n  const color = rank.color();\n  attrs.style.backgroundColor = attrs.style.color = color;\n  attrs.className += ' colored';\n  return m('span', attrs, m(\"span\", {\n    className: \"rankLabel-text\"\n  }, rank.name()));\n}\nflarum.reg.add('fof-gamification', 'common/helpers/rankLabel', rankLabel);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/DiscussionPage');","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport debounce from 'lodash.debounce';\nconst fetch = postId => app.store.find('posts', postId).then(() => m.redraw());\nconst debounced = [];\nconst update = postId => {\n  let func = debounced[postId];\n  if (func) return func(postId);\n  func = debounced[postId] = debounce(fetch, 1500);\n  return func(postId);\n};\nexport default () => {\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    if (app.pusher) {\n      app.pusher.then(channels => {\n        channels.pusher.bind('newVote', data => {\n          const post = app.store.getById('posts', data.post_id);\n          const userId = data.user_id;\n          if (!post || post.votes() === data.votes || userId == app.session.user.id()) return;\n          update(post.id());\n        });\n      });\n    }\n  });\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    if (app.pusher) {\n      app.pusher.then(channels => {\n        channels.pusher.unbind('newVote');\n      });\n    }\n  });\n};","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport saveVote from './helpers/saveVote';\nconst get = (discussion, key) => {\n  const post = discussion.firstPost();\n  if (post && post[key]() !== undefined) {\n    return post[key]();\n  }\n  return discussion[key]();\n};\nexport default function addAlternateLayout() {\n  extend(DiscussionListItem.prototype, 'oninit', function () {\n    if (app.forum.attribute('fof-gamification.useAlternateLayout')) {\n      return;\n    }\n    const discussion = this.attrs.discussion;\n    if (!discussion.seeVotes()) {\n      return;\n    }\n    this.subtree.check(() => this.voteLoading);\n  });\n  extend(DiscussionListItem.prototype, 'contentItems', function (items) {\n    if (!app.forum.attribute('fof-gamification.useAlternateLayout')) {\n      return;\n    }\n    const discussion = this.attrs.discussion;\n    if (!discussion.seeVotes()) {\n      return;\n    }\n    const post = discussion.firstPost();\n    const hasUpvoted = get(discussion, 'hasUpvoted');\n    const hasDownvoted = get(discussion, 'hasDownvoted');\n    // We set canVote to true for guest users so that they can access the login by clicking the button\n    const canVote = !app.session.user || get(discussion, 'canVote');\n    const upvotesOnly = app.forum.attribute('fof-gamification.upVotesOnly');\n    const altIcon = app.forum.attribute('fof-gamification.iconNameAlt');\n    const onclick = (upvoted, downvoted) => saveVote(post, upvoted, downvoted, val => this.voteLoading = val);\n    items.add('votes-alt', m(\"div\", {\n      className: \"DiscussionListItem-votes alternateLayout\",\n      \"data-upvotes-only\": upvotesOnly\n    }, m(Button, {\n      className: \"DiscussionListItem-voteButton DiscussionListItem-voteButton--up Button Button--icon Button--text\",\n      icon: `fas fa-fw fa-${altIcon}-up`,\n      \"data-active\": hasUpvoted,\n      disabled: !canVote || this.voteLoading,\n      onclick: () => onclick(!hasUpvoted, false),\n      \"aria-label\": app.translator.trans('fof-gamification.forum.post.upvote_button')\n    }), m(\"span\", {\n      class: \"DiscussionListItem-voteCount\"\n    }, abbreviateNumber(get(discussion, 'votes') || 0)), !upvotesOnly && m(Button, {\n      className: \"DiscussionListItem-voteButton DiscussionListItem-voteButton--down Button Button--icon Button--text\",\n      icon: `fas fa-fw fa-${altIcon}-down`,\n      \"data-active\": hasDownvoted,\n      disabled: !canVote || this.voteLoading,\n      onclick: () => onclick(false, !hasDownvoted),\n      \"aria-label\": app.translator.trans('fof-gamification.forum.post.downvote_button')\n    }), this.voteLoading && m(LoadingIndicator, {\n      display: \"inline\",\n      size: \"small\"\n    })), 110);\n  });\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/Notification');","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nexport default class UpvotedNotification extends Notification {\n  icon() {\n    const icon = app.forum.attribute('fof-gamification.iconName');\n    if (this.attrs.notification.content() > 0) {\n      return `fas fa-${icon}-up`;\n    } else {\n      return `fas fa-${icon}-down`;\n    }\n  }\n  href() {\n    return app.route.post(this.attrs.notification.subject());\n  }\n  content() {\n    const user = this.attrs.notification.fromUser();\n    const content = parseInt(this.attrs.notification.content());\n    if (content > 0) {\n      return app.translator.trans('fof-gamification.forum.notification.upvote', {\n        user\n      });\n    } else {\n      return app.translator.trans('fof-gamification.forum.notification.downvote', {\n        user\n      });\n    }\n  }\n  excerpt() {\n    return this.attrs.notification.subject().contentPlain();\n  }\n}\nflarum.reg.add('fof-gamification', 'forum/components/VoteNotification', UpvotedNotification);","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Tooltip');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/SubtreeRetainer');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Link from 'flarum/common/components/Link';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Avatar from 'flarum/common/components/Avatar';\nimport Icon from 'flarum/common/components/Icon';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\nexport default class Voters extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"subtreeRetainer\", void 0);\n    _defineProperty(this, \"lastRenderVotes\", -1);\n    _defineProperty(this, \"loading\", false);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = !this.attrs.post.upvotes();\n    if (this.loading) {\n      this.load();\n    }\n    this.subtreeRetainer = new SubtreeRetainer(() => this.loading, () => this.attrs.post.votes(), () => this.attrs.post?.upvotes?.()?.length);\n  }\n  onbeforeupdate(vnode) {\n    super.onbeforeupdate(vnode);\n    return this.subtreeRetainer.needsRebuild();\n  }\n  onupdate() {\n    if (this.lastRenderVotes !== this.attrs.post.votes()) {\n      this.loading = true;\n      setTimeout(() => m.redraw(), 0);\n      this.lastRenderVotes = this.attrs.post.votes();\n      this.load();\n    }\n  }\n  view() {\n    if (this.loading || !this.attrs.post.upvotes()) {\n      return m(\"div\", {\n        className: \"VotingContainer\"\n      }, m(\"div\", {\n        className: \"FoFGamification-voters\"\n      }, m(\"div\", {\n        className: \"FoFGamification-voters-title\"\n      }, m(\"span\", {\n        className: \"FoFGamification-voters-title-icon\"\n      }, m(Icon, {\n        name: \"fas fa-users\"\n      }), m(\"span\", {\n        className: \"FoFGamification-voters-title-label\"\n      }, app.translator.trans('fof-gamification.forum.voters.label')), m(\"span\", {\n        className: \"FoFGamification-voters-title-label FoFGamification-voters-title-label--mobile\"\n      }, app.translator.trans('fof-gamification.forum.voters.label')))), m(LoadingIndicator, {\n        display: \"inline\"\n      })));\n    }\n    const max = 15;\n    const voters = this.attrs.post.upvotes();\n    return m(\"div\", {\n      className: \"VotingContainer\"\n    }, m(\"div\", {\n      className: \"FoFGamification-voters\"\n    }, m(\"div\", {\n      className: \"FoFGamification-voters-title\"\n    }, m(\"span\", {\n      className: \"FoFGamification-voters-title-icon\"\n    }, m(Icon, {\n      name: \"fas fa-users\"\n    }), m(\"span\", {\n      className: \"FoFGamification-voters-title-label\"\n    }, app.translator.trans('fof-gamification.forum.voters.label')), m(\"span\", {\n      className: \"FoFGamification-voters-title-label FoFGamification-voters-title-label--mobile\"\n    }, voters.length === 0 ? app.translator.trans('fof-gamification.forum.voters.label_none') : app.translator.trans('fof-gamification.forum.voters.label')))), m(\"div\", {\n      className: \"FoFGamification-voters-message\"\n    }, voters.length === 0 ? app.translator.trans('fof-gamification.forum.voters.none') : null), m(\"div\", {\n      className: \"FoFGamification-voters-list\"\n    }, voters.slice(0, max).map(user => m(Link, {\n      href: app.route('user', {\n        username: user.slug()\n      }),\n      className: \"FoFGamification-voters-item\"\n    }, m(Tooltip, {\n      text: user.displayName()\n    }, m(Avatar, {\n      user: user\n    })))), voters.length > max ? m(\"span\", {\n      className: \"FoFGamification-voters-item FoFGamification-voters-item--plus\"\n    }, m(\"span\", {\n      className: \"Avatar\"\n    }, `+${voters.length - max}`)) : null)));\n  }\n  async load() {\n    const postId = this.attrs.post.id();\n    if (!postId) return;\n    await app.store.find('posts', postId, {\n      include: 'upvotes'\n    });\n    this.loading = false;\n    m.redraw();\n  }\n}\nflarum.reg.add('fof-gamification', 'forum/components/Voters', Voters);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/UserPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/PostsUserPage');","import app from 'flarum/forum/app';\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\n/**\n * The `VotesUserPage` component shows posts which user voted on.\n */\nexport default class VotesUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param offset The position to start getting results from.\n   * @protected\n   */\n  loadResults(offset) {\n    const params = {\n      filter: {\n        type: 'comment',\n        ...(this.user?.id() && {\n          voted: this.user.id()\n        })\n      },\n      page: {\n        offset,\n        limit: this.loadLimit\n      },\n      sort: '-createdAt'\n    };\n    return app.store.find('posts', params);\n  }\n}\nflarum.reg.add('fof-gamification', 'forum/components/VotesUserPage', VotesUserPage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import Model from 'flarum/common/Model';\nexport default class Rank extends Model {\n  points() {\n    return Model.attribute('points').call(this);\n  }\n  name() {\n    return Model.attribute('name').call(this);\n  }\n  color() {\n    return Model.attribute('color').call(this);\n  }\n}\nflarum.reg.add('fof-gamification', 'common/models/Rank', Rank);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/query/IGambit');","import app from 'flarum/common/app';\nimport { BooleanGambit } from 'flarum/common/query/IGambit';\nexport default class HotGambit extends BooleanGambit {\n  key() {\n    return app.translator.trans('fof-gamification.lib.gambits.hot.key', {}, true);\n  }\n  filterKey() {\n    return 'hot';\n  }\n}\nflarum.reg.add('fof-gamification', 'common/gambits/HotGambit', HotGambit);","import Extend from 'flarum/common/extenders';\nimport Rank from './models/Rank';\nimport HotGambit from './gambits/HotGambit';\nexport default [new Extend.Store() //\n.add('ranks', Rank), new Extend.Search() //\n.gambit('discussions', HotGambit)];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/PageStructure');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Page');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/listItems');","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Icon from 'flarum/common/components/Icon';\nexport default class RankingImage extends Component {\n  view() {\n    const imgUrl = app.forum.attribute(`fof-gamification.topimage${this.attrs.place}Url`);\n    const place = this.attrs.place;\n    return imgUrl ? m(\"img\", {\n      className: `rankings-mobile rankings-image rankings-${place}`,\n      src: imgUrl,\n      alt: \"\"\n    }) : m(\"td\", {\n      className: `rankings-mobile rankings-${place}`\n    }, m(Icon, {\n      name: \"fas fa-trophy\"\n    }));\n  }\n}\nflarum.reg.add('fof-gamification', 'forum/components/RankingImage', RankingImage);","import IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport PageStructure from 'flarum/forum/components/PageStructure';\nimport app from 'flarum/forum/app';\nimport Avatar from 'flarum/common/components/Avatar';\nimport Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport listItems from 'flarum/common/helpers/listItems';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport RankingImage from './RankingImage';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class RankingsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    if (!app.forum.attribute('canViewRankingPage')) {\n      m.route.set('/');\n    }\n    this.loading = true;\n    this.users = [];\n    this.refresh();\n  }\n  view() {\n    let loading;\n    if (this.loading) {\n      loading = LoadingIndicator.component();\n    } else {\n      loading = Button.component({\n        className: 'Button',\n        onclick: this.loadMore.bind(this)\n      }, app.translator.trans('core.forum.discussion_list.load_more_button'));\n    }\n    return m(PageStructure, {\n      className: \"RankingsPage\",\n      hero: () => IndexPage.prototype.hero(),\n      sidebar: () => m(IndexSidebar, null)\n    }, m(\"table\", {\n      class: \"rankings\"\n    }, m(\"tr\", null, m(\"th\", {\n      className: \"rankings-mobile\"\n    }, app.translator.trans('fof-gamification.forum.ranking.rank')), m(\"th\", null, app.translator.trans('fof-gamification.forum.ranking.name')), m(\"th\", null, app.translator.trans('fof-gamification.forum.ranking.amount'))), this.users.map((user, i) => {\n      ++i;\n      return [m(\"tr\", {\n        className: 'ranking-' + i\n      }, i < 4 ? m(RankingImage, {\n        place: i\n      }) : m(\"td\", {\n        className: \"rankings-4 rankings-mobile\"\n      }, this.addOrdinalSuffix(i)), m(\"td\", null, m(\"div\", {\n        className: \"PostUser\"\n      }, m(\"h3\", {\n        className: \"PostUser-name rankings-info\"\n      }, m(Link, {\n        href: app.route.user(user),\n        force: true\n      }, i < 4 ? m(Avatar, {\n        user: user,\n        className: 'info-avatar rankings-' + i + '-avatar'\n      }) : '', \" \", username(user))))), i < 4 ? m(\"td\", {\n        className: 'rankings-' + i\n      }, user.points()) : m(\"td\", {\n        className: \"rankings-4\"\n      }, user.points()))];\n    })), m(\"div\", {\n      className: \"rankings-loadmore\"\n    }, \" \", loading));\n  }\n  refresh(clear) {\n    if (clear === void 0) {\n      clear = true;\n    }\n    if (clear) {\n      this.loading = true;\n      this.users = [];\n    }\n    return this.loadResults().then(results => {\n      this.users = [];\n      this.parseResults(results);\n    }, () => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  addOrdinalSuffix(i) {\n    if (app.data.locale === 'en') {\n      const j = i % 10;\n      const k = i % 100;\n      if (j === 1 && k !== 11) {\n        return i + 'st';\n      } else if (j === 2 && k !== 12) {\n        return i + 'nd';\n      } else if (j === 3 && k !== 13) {\n        return i + 'rd';\n      }\n      return i + 'th';\n    } else {\n      return i;\n    }\n  }\n  loadResults(offset) {\n    const params = {};\n    params.page = {\n      filter: {\n        rankable: true\n      },\n      include: 'ranks',\n      sort: '-votes',\n      offset: offset,\n      limit: '10'\n    };\n    return app.store.find('users', params);\n  }\n  loadMore() {\n    this.loading = true;\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n  parseResults(results) {\n    [].push.apply(this.users, results);\n    this.loading = false;\n    this.users.sort(function (a, b) {\n      return parseFloat(b.points()) - parseFloat(a.points());\n    });\n    m.redraw();\n    return results;\n  }\n}\nflarum.reg.add('fof-gamification', 'forum/components/RankingsPage', RankingsPage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Discussion');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Post');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/User');","import commonExtend from '../common/extend';\nimport Extend from 'flarum/common/extenders';\nimport RankingsPage from './components/RankingsPage';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Post from 'flarum/common/models/Post';\nimport User from 'flarum/common/models/User';\nexport default [...commonExtend, new Extend.Routes() //\n.add('rankings', '/rankings', RankingsPage), new Extend.Model(Discussion) //\n.attribute('votes').attribute('hasUpvoted').attribute('hasDownvoted').attribute('canVote').attribute('seeVotes'), new Extend.Model(Post) //\n.hasMany('upvotes').hasMany('downvotes').attribute('votes').attribute('canVote').attribute('canSeeVotes').attribute('hasUpvoted').attribute('hasDownvoted').attribute('seeVoters'), new Extend.Model(User) //\n.attribute('points').hasMany('ranks').attribute('canHaveVotingNotifications')];","import app from 'flarum/forum/app';\nimport addHotnessSort from './addHotnessSort';\nimport addVoteButtons from './addVoteButtons';\nimport addUpvotesToDiscussion from './addUpvotesToDiscussion';\nimport addUserInfo from './addUserInfo';\nimport addPusher from './addPusher';\nimport addAlternateLayout from './addAlternateLayout';\nimport addVotesSort from './addVotesSort';\nimport useAlternatePostVoteLayout from './useAlternatePostVoteLayout';\nimport addNotifications from './addNotifications';\nimport addVotersToDiscussionPageSideBar from './addVotersToDiscussionPageSideBar';\nimport addUpvoteTabToUserProfile from './addUpvoteTabToUserProfile';\nexport { default as extend } from './extend';\napp.initializers.add('fof-gamification', () => {\n  addVoteButtons();\n  addHotnessSort();\n  addVotesSort();\n  addUserInfo();\n  addUpvotesToDiscussion();\n  addPusher();\n  addNotifications();\n  addVotersToDiscussionPageSideBar();\n  addUpvoteTabToUserProfile();\n  addAlternateLayout();\n  useAlternatePostVoteLayout();\n});","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport classList from 'flarum/common/utils/classList';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport VotesModal from './components/VotesModal';\nimport saveVote from './helpers/saveVote';\nexport default function () {\n  extend(PostControls, 'moderationControls', function (items, post) {\n    if (post.seeVoters()) {\n      items.add('viewVotes', [m(Button, {\n        icon: 'fas fa-thumbs-up',\n        onclick: () => {\n          app.modal.show(VotesModal, {\n            post\n          });\n        }\n      }, app.translator.trans('fof-gamification.forum.mod_item'))]);\n    }\n  });\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n    const post = this.attrs.post;\n\n    //if (!post.canVote()) return;\n\n    const hasDownvoted = post.hasDownvoted();\n    const hasUpvoted = post.hasUpvoted();\n    const icon = app.forum.attribute('fof-gamification.iconName');\n    const upVotesOnly = app.forum.attribute('fof-gamification.upVotesOnly');\n    const canSeeVotes = post.canSeeVotes();\n\n    // We set canVote to true for guest users so that they can access the login by clicking the button\n    const canVote = !app.session.user || post.canVote();\n    const onclick = (upvoted, downvoted) => saveVote(post, upvoted, downvoted, val => this.voteLoading = val);\n    items.add('votes', m(\"div\", {\n      className: classList('CommentPost-votes', app.forum.attribute('fof-gamification.useAlternateLayout') && 'alternateLayout')\n    }, Button.component({\n      icon: this.voteLoading ? undefined : `fas fa-fw fa-${icon}-up`,\n      className: classList('Post-vote Post-upvote', hasUpvoted && 'Post-vote--active'),\n      loading: this.voteLoading,\n      disabled: this.voteLoading || !canVote || !canSeeVotes,\n      onclick: () => onclick(!hasUpvoted, false),\n      'aria-label': app.translator.trans('fof-gamification.forum.post.upvote_button')\n    }), m(\"label\", {\n      className: \"Post-points\"\n    }, post.votes()), !upVotesOnly && Button.component({\n      icon: this.voteLoading ? undefined : `fas fa-fw fa-${icon}-down`,\n      className: classList('Post-vote Post-downvote', hasDownvoted && 'Post-vote--active'),\n      loading: this.voteLoading,\n      disabled: !canVote || !canSeeVotes,\n      onclick: () => onclick(false, !hasDownvoted),\n      'aria-label': app.translator.trans('fof-gamification.forum.post.downvote_button')\n    })), 10);\n  });\n}","import IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default function () {\n  extend(IndexSidebar.prototype, 'navItems', function (items) {\n    if (!app.forum.attribute('canViewRankingPage')) {\n      return;\n    }\n    items.add('rankings', LinkButton.component({\n      href: app.route('rankings'),\n      icon: 'fas fa-trophy'\n    }, app.translator.trans('fof-gamification.forum.nav.name')), 80);\n  });\n  extend(DiscussionListState.prototype, 'sortMap', function (map) {\n    map.hot = '-hotness';\n  });\n}","import { extend } from 'flarum/common/extend';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nexport default function () {\n  extend(DiscussionListState.prototype, 'sortMap', function (map) {\n    map.votes = '-votes';\n  });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport PostUser from 'flarum/forum/components/PostUser';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport rankLabel from '../common/helpers/rankLabel';\nimport Icon from 'flarum/common/components/Icon';\nexport default function () {\n  const matchClass = className => {\n    return node => node && node.attrs && node.attrs.className && String(node.attrs.className).split(' ').includes(className);\n  };\n  const findMatchClass = function (node, className) {\n    const arr = [];\n    if (node && node.children && Array.isArray(node.children)) {\n      const nodeInChildren = node.children.find(matchClass(className));\n      if (nodeInChildren) {\n        arr.push(nodeInChildren);\n      }\n      node.children.forEach(function (currentValue) {\n        arr.push(...findMatchClass(currentValue, className));\n      });\n    }\n    return arr;\n  };\n  extend(UserCard.prototype, 'infoItems', function (items) {\n    const user = this.attrs.user;\n    items.add('points', m(\"div\", null, m(Icon, {\n      name: \"fas fa-medal\"\n    }), app.translator.trans('fof-gamification.forum.user.card.points', {\n      count: user.points()\n    })), 50);\n  });\n  extend(UserCard.prototype, 'view', function (vnode) {\n    const user = this.attrs.user;\n    const profile_node = findMatchClass(vnode, 'UserCard-profile')[0];\n    const amt = app.forum.attribute('fof-gamification.rankAmt') ?? user.ranks().length;\n    if (!profile_node) return;\n    let badges_node = profile_node.children.find(matchClass('UserCard-badges'));\n    if (user.ranks()) {\n      if (!badges_node) {\n        profile_node.children.splice(1, 0, m(\"ul\", {\n          className: \"UserCard-badges badges\"\n        }, user.ranks().reverse().map((rank, i) => {\n          if (!amt || i < amt) {\n            return m(\"li\", {\n              className: \"User-Rank\"\n            }, rankLabel(rank));\n          }\n        })));\n      } else {\n        user.ranks().reverse().map((rank, i) => {\n          if (!amt || i < amt) {\n            return m(\"li\", {\n              className: \"User-Rank\"\n            }, rankLabel(rank));\n          }\n        }).forEach(rank => {\n          if (!rank) {\n            return;\n          }\n          badges_node.children.push(rank);\n        });\n      }\n    }\n    return vnode;\n  });\n  extend(PostUser.prototype, 'view', function (vnode) {\n    const post = this.attrs.post;\n    const user = post.user();\n    if (!user) {\n      return vnode;\n    }\n    const header_node = vnode.children.find(matchClass('PostUser-name'));\n    const amt = app.forum.attribute('fof-gamification.rankAmt') ?? user.ranks().length;\n    if (!user.ranks()) return;\n    header_node.children = header_node.children.concat(user.ranks().reverse().splice(0, amt).map(rank => {\n      return m(\"span\", {\n        className: \"Post-Rank\"\n      }, rankLabel(rank));\n    })).filter(function (el) {\n      return el.tag !== undefined;\n    });\n  });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Icon from 'flarum/common/components/Icon';\nexport default function () {\n  extend(DiscussionListItem.prototype, 'elementAttrs', function (attrs) {\n    if (!this.attrs.discussion.seeVotes() || !app.forum.attribute('fof-gamification.showVotesOnDiscussionPage') || app.forum.attribute('fof-gamification.useAlternateLayout')) {\n      return;\n    }\n    attrs.className += ' DiscussionListItem--withVotes';\n  });\n  extend(DiscussionListItem.prototype, 'infoItems', function (items) {\n    if (!app.forum.attribute('fof-gamification.showVotesOnDiscussionPage') || app.forum.attribute('fof-gamification.useAlternateLayout')) {\n      return;\n    }\n    const discussion = this.attrs.discussion;\n    if (!discussion.seeVotes()) {\n      return;\n    }\n    items.add('discussion-votes', m(\"span\", {\n      className: \"DiscussionListItem-votes\",\n      title: app.translator.trans('fof-gamification.forum.votes')\n    }, m(Icon, {\n      name: \"far fa-thumbs-up\"\n    }), abbreviateNumber(this.attrs.discussion.votes())), 20);\n  });\n}","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport VoteNotification from './components/VoteNotification';\nexport default function addNotifications() {\n  app.notificationComponents.vote = VoteNotification;\n  extend('flarum/forum/components/NotificationGrid', 'notificationTypes', function (items) {\n    const user = app.session?.user;\n    if (!user?.canHaveVotingNotifications?.()) return;\n    items.add('vote', {\n      name: 'vote',\n      icon: 'fas fa-thumbs-up',\n      label: app.translator.trans('fof-gamification.forum.notification.prefrences.vote')\n    });\n  });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Voters from './components/Voters';\n/**\n * Adds our custom {@link Voters} component to the discussion sidebar.\n */\nexport default function addVotersToDiscussionPageSideBar() {\n  extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n    const discussion = this.discussion;\n    const posts = discussion.posts() || [];\n    const firstPost = posts?.[0];\n    if (firstPost?.canSeeVotes?.() && firstPost?.seeVoters?.() && !!app.forum.attribute('fof-gamification.firstPostOnly')) {\n      items.add('op-voters', m(Voters, {\n        post: firstPost\n      }), 90);\n    }\n  });\n}","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport VotesUserPage from './components/VotesUserPage';\nexport default function addUpvoteTabToUserProfile() {\n  app.routes['user.votes'] = {\n    path: '/u/:username/votes',\n    component: VotesUserPage\n  };\n  extend(UserPage.prototype, 'navItems', function (items) {\n    const user = this.user;\n    const icon = app.forum.attribute('fof-gamification.iconName');\n    items.add('votes', m(LinkButton, {\n      href: app.route('user.votes', {\n        username: user.slug()\n      }),\n      name: \"votes\",\n      icon: `fas fa-fw fa-${icon}-up`\n    }, app.translator.trans('fof-gamification.forum.user.votes_link')), 85);\n  });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Button from 'flarum/common/components/Button';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport saveVote from './helpers/saveVote';\nexport default function useAlternatePostVoteLayout() {\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n    if (!app.forum.attribute('fof-gamification.altPostVotingUi')) {\n      return;\n    }\n    if (this.attrs.post.isHidden()) return;\n    items.remove('votes');\n  });\n  extend(CommentPost.prototype, 'classes', function (classes) {\n    if (!app.forum.attribute('fof-gamification.altPostVotingUi')) {\n      return;\n    }\n    if (this.attrs.post.isHidden()) return;\n    const upvotesOnly = app.forum.attribute('fof-gamification.upVotesOnly');\n    classes.push('votesAlternativeLayout');\n    if (upvotesOnly) {\n      classes.push('votesUpvotesOnly');\n    }\n  });\n  extend(CommentPost.prototype, 'oninit', function () {\n    if (!app.forum.attribute('fof-gamification.altPostVotingUi')) {\n      return;\n    }\n    this.voteLoading = false;\n  });\n  extend(CommentPost.prototype, 'sideItems', function (items) {\n    if (!app.forum.attribute('fof-gamification.altPostVotingUi')) {\n      return;\n    }\n    const post = this.attrs.post;\n    if (post.isHidden()) return;\n    if (!post.canSeeVotes()) return;\n    const hasDownvoted = post.hasDownvoted();\n    const hasUpvoted = post.hasUpvoted();\n    const icon = app.forum.attribute('fof-gamification.iconName');\n    const upvotesOnly = app.forum.attribute('fof-gamification.upVotesOnly');\n    const canSeeVotes = post.canSeeVotes();\n\n    // We set canVote to true for guest users so that they can access the login by clicking the button\n    const canVote = !app.session.user || post.canVote();\n    const onclick = (upvoted, downvoted) => saveVote(post, upvoted, downvoted, val => {\n      this.voteLoading = val;\n    });\n    items.add('votes', m(\"div\", {\n      className: \"Post-votes alternateLayout\",\n      \"data-upvotes-only\": upvotesOnly\n    }, m(Button, {\n      className: \"Post-voteButton Post-voteButton--up Button Button--icon Button--text\",\n      icon: `fas fa-fw fa-${icon}-up`,\n      \"data-active\": hasUpvoted,\n      disabled: !canVote || this.voteLoading || !canSeeVotes,\n      onclick: () => onclick(!hasUpvoted, false),\n      \"aria-label\": app.translator.trans('fof-gamification.forum.post.upvote_button')\n    }), m(\"span\", {\n      class: \"Post-voteCount\"\n    }, abbreviateNumber(post.votes() || 0)), !upvotesOnly && m(Button, {\n      className: \"Post-voteButton Post-voteButton--down Button Button--icon Button--text\",\n      icon: `fas fa-fw fa-${icon}-down`,\n      \"data-active\": hasDownvoted,\n      disabled: !canVote || this.voteLoading,\n      onclick: () => onclick(false, !hasDownvoted),\n      \"aria-label\": app.translator.trans('fof-gamification.forum.post.downvote_button')\n    }), this.voteLoading && m(LoadingIndicator, {\n      display: \"inline\",\n      size: \"small\"\n    })));\n  });\n}"],"names":["reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","global","Object","freeSelf","self","root","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","isObject","value","type","toNumber","isObjectLike","call","isSymbol","other","valueOf","replace","isBinary","test","slice","module","exports","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","cancel","clearTimeout","flush","__webpack_module_cache__","__webpack_require__","moduleId","flarum","reg","_webpack_runtimes","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","defineProperty","enumerable","get","g","globalThis","e","window","obj","prop","hasOwnProperty","r","Symbol","toStringTag","VotesModal","className","title","trans","oninit","vnode","super","loading","attrs","post","upvotes","downvotes","load","content","m","map","voters","length","user","href","find","id","include","then","loaded","bind","add","upvoted","downvoted","discussion","canVote","action","redraw","save","vote","pushAttributes","votes","rankLabel","rank","style","color","backgroundColor","name","fetch","postId","firstPost","UpvotedNotification","icon","attribute","notification","subject","fromUser","excerpt","contentPlain","_typeof","iterator","constructor","_defineProperty","t","i","toPrimitive","String","toPropertyKey","configurable","writable","Voters","subtreeRetainer","onbeforeupdate","needsRebuild","onupdate","lastRenderVotes","view","display","username","slug","text","displayName","VotesUserPage","loadResults","offset","params","filter","voted","page","limit","loadLimit","sort","Rank","points","HotGambit","BooleanGambit","filterKey","gambit","RankingImage","imgUrl","place","src","alt","RankingsPage","route","set","users","refresh","onclick","loadMore","hero","sidebar","class","addOrdinalSuffix","force","clear","results","parseResults","locale","j","k","rankable","push","b","parseFloat","hasMany","extend","items","seeVoters","show","hasDownvoted","hasUpvoted","upVotesOnly","canSeeVotes","saveVote","val","voteLoading","disabled","hot","matchClass","node","split","includes","findMatchClass","arr","children","Array","isArray","nodeInChildren","forEach","currentValue","count","profile_node","amt","ranks","badges_node","reverse","splice","header_node","concat","el","tag","addUserInfo","seeVotes","channels","pusher","data","getById","post_id","userId","user_id","update","unbind","canHaveVotingNotifications","label","posts","path","component","subtree","check","upvotesOnly","altIcon","size","isHidden","remove","classes"],"sourceRoot":""}