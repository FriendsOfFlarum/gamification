{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/gamification/./node_modules/lodash.debounce/index.js","webpack://@fof/gamification/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@fof/gamification/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@fof/gamification/./node_modules/@babel/runtime/regenerator/index.js","webpack://@fof/gamification/webpack/bootstrap","webpack://@fof/gamification/webpack/runtime/compat get default export","webpack://@fof/gamification/webpack/runtime/define property getters","webpack://@fof/gamification/webpack/runtime/global","webpack://@fof/gamification/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/gamification/webpack/runtime/make namespace object","webpack://@fof/gamification/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/gamification/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/gamification/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@fof/gamification/./src/common/models/Rank.js","webpack://@fof/gamification/./src/common/models/index.js","webpack://@fof/gamification/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/models/Post']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/models/User']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/gamification/./src/forum/components/RankingImage.tsx","webpack://@fof/gamification/./src/forum/components/RankingsPage.js","webpack://@fof/gamification/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/gamification/./src/forum/components/VotesModal.js","webpack://@fof/gamification/./src/forum/helpers/setting.js","webpack://@fof/gamification/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@fof/gamification/./src/forum/helpers/saveVote.js","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/PostUser']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@fof/gamification/./src/common/helpers/rankLabel.js","webpack://@fof/gamification/./src/forum/addUserInfo.js","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/gamification/./src/forum/addPusher.js","webpack://@fof/gamification/./src/forum/addAlternateLayout.js","webpack://@fof/gamification/external root \"flarum.core.compat['common/states/DiscussionListState']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@fof/gamification/./src/forum/components/VoteNotification.js","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@fof/gamification/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@fof/gamification/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/gamification/external root \"flarum.core.compat['common/utils/SubtreeRetainer']\"","webpack://@fof/gamification/./src/forum/components/Voters.tsx","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@fof/gamification/external root \"flarum.core.compat['forum/components/PostsUserPage']\"","webpack://@fof/gamification/./src/forum/components/VotesUserPage.ts","webpack://@fof/gamification/./src/forum/components/index.js","webpack://@fof/gamification/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/gamification/./src/common/helpers/index.js","webpack://@fof/gamification/./src/forum/helpers/index.js","webpack://@fof/gamification/./src/forum/index.js","webpack://@fof/gamification/./src/forum/addVoteButtons.js","webpack://@fof/gamification/./src/forum/addHotnessSort.js","webpack://@fof/gamification/./src/forum/addVotesSort.js","webpack://@fof/gamification/./src/forum/addUpvotesToDiscussion.js","webpack://@fof/gamification/./src/forum/addNotifications.ts","webpack://@fof/gamification/./src/forum/addVotersToDiscussionPageSideBar.tsx","webpack://@fof/gamification/./src/forum/addUpvoteTabToUserProfile.js","webpack://@fof/gamification/./src/forum/useAlternatePostVoteLayout.tsx"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Rank extends mixin(Model, {\n  points: Model.attribute('points'),\n  name: Model.attribute('name'),\n  color: Model.attribute('color'),\n}) {}\n","import Rank from './Rank';\n\nexport const models = {\n  Rank,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport type Mithril from 'mithril';\nimport icon from 'flarum/common/helpers/icon';\n\ninterface RankingImageAttrs extends ComponentAttrs {\n  place: number;\n}\n\nexport default class RankingImage extends Component<RankingImageAttrs> {\n  view() {\n    const imgUrl = app.forum.attribute(`fof-gamification.topimage${this.attrs.place}Url`);\n    const place = this.attrs.place;\n\n    return imgUrl ? (\n      <img className={`rankings-mobile rankings-image rankings-${place}`} src={imgUrl} alt=\"\" />\n    ) : (\n      <td className={`rankings-mobile rankings-${place}`}>{icon('fas fa-trophy')}</td>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport avatar from 'flarum/common/helpers/avatar';\nimport Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport listItems from 'flarum/common/helpers/listItems';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport RankingImage from './RankingImage';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class RankingsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute('canViewRankingPage')) {\n      m.route.set('/');\n    }\n\n    this.loading = true;\n    this.users = [];\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component();\n    } else {\n      loading = Button.component(\n        {\n          className: 'Button',\n          onclick: this.loadMore.bind(this),\n        },\n        app.translator.trans('core.forum.discussion_list.load_more_button')\n      );\n    }\n\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <table class=\"rankings\">\n                <tr>\n                  <th className=\"rankings-mobile\">{app.translator.trans('fof-gamification.forum.ranking.rank')}</th>\n                  <th>{app.translator.trans('fof-gamification.forum.ranking.name')}</th>\n                  <th>{app.translator.trans('fof-gamification.forum.ranking.amount')}</th>\n                </tr>\n                {this.users.map((user, i) => {\n                  ++i;\n                  return [\n                    <tr className={'ranking-' + i}>\n                      {i < 4 ? <RankingImage place={i} /> : <td className=\"rankings-4 rankings-mobile\">{this.addOrdinalSuffix(i)}</td>}\n                      <td>\n                        <div className=\"PostUser\">\n                          <h3 className=\"rankings-info\">\n                            <Link href={app.route.user(user)} force={true}>\n                              {i < 4 ? avatar(user, { className: 'info-avatar rankings-' + i + '-avatar' }) : ''} {username(user)}\n                            </Link>\n                          </h3>\n                        </div>\n                      </td>\n                      {i < 4 ? <td className={'rankings-' + i}>{user.points()}</td> : <td className=\"rankings-4\">{user.points()}</td>}\n                    </tr>,\n                  ];\n                })}\n              </table>\n              <div className=\"rankings-loadmore\"> {loading}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  refresh(clear = true) {\n    if (clear) {\n      this.loading = true;\n      this.users = [];\n    }\n\n    return this.loadResults().then(\n      (results) => {\n        this.users = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  addOrdinalSuffix(i) {\n    if (app.data.locale === 'en') {\n      const j = i % 10;\n      const k = i % 100;\n\n      if (j === 1 && k !== 11) {\n        return i + 'st';\n      } else if (j === 2 && k !== 12) {\n        return i + 'nd';\n      } else if (j === 3 && k !== 13) {\n        return i + 'rd';\n      }\n      return i + 'th';\n    } else {\n      return i;\n    }\n  }\n\n  loadResults(offset) {\n    const params = {};\n    params.page = {\n      offset: offset,\n      limit: '10',\n    };\n\n    return app.store.find('rankings', params);\n  }\n\n  loadMore() {\n    this.loading = true;\n\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n\n  parseResults(results) {\n    [].push.apply(this.users, results);\n\n    this.loading = false;\n\n    this.users.sort(function (a, b) {\n      return parseFloat(b.points()) - parseFloat(a.points());\n    });\n\n    m.redraw();\n\n    return results;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\n\nexport default class VotesModal extends Modal {\n  className() {\n    return 'VotesModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('fof-gamification.forum.modal.title');\n  }\n\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = !this.attrs.post.upvotes() || !this.attrs.post.downvotes();\n\n    if (this.loading) {\n      this.load();\n    }\n  }\n\n  content() {\n    if (this.loading) {\n      return (\n        <div className=\"Modal-body\">\n          <LoadingIndicator />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <ul className=\"VotesModal-list\">\n          {['upvotes', 'downvotes'].map((type) => {\n            const voters = this.attrs.post[type]();\n\n            if (!voters || !voters.length) return;\n\n            return (\n              <div>\n                <legend>{app.translator.trans(`fof-gamification.forum.modal.${type}_label`)}</legend>\n                {voters.map((user) => (\n                  <li>\n                    <Link href={app.route.user(user)}>\n                      {avatar(user)} {username(user)}\n                    </Link>\n                  </li>\n                ))}\n              </div>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n\n  load() {\n    return app.store\n      .find('posts', this.attrs.post.id(), {\n        include: 'upvotes,downvotes',\n      })\n      .then(this.loaded.bind(this));\n  }\n}\n","import app from 'flarum/forum/app';\n\nexport default (key, isBool = false) => {\n  const val = app.data[`fof-gamification.${key}`];\n\n  if (isBool) {\n    return !!parseInt(val);\n  }\n\n  return val;\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","import app from 'flarum/forum/app';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\n\nexport default (post, upvoted, downvoted, load, discussion = post.discussion()) => {\n  if (!app.session.user) {\n    // We use this instead of showing LogInModal so that extensions can override it\n    DiscussionControls.replyAction.call(discussion, true);\n    return;\n  } else if (discussion && !discussion.canVote() && !post.canVote()) {\n    return;\n  }\n\n  if (upvoted && downvoted) {\n    upvoted = false;\n    downvoted = false;\n  }\n\n  if (load) load(true);\n\n  m.redraw();\n\n  return post\n    .save([upvoted, downvoted, 'vote'])\n    .then(\n      () => null,\n      () => null\n    )\n    .then(() => {\n      if (load) load(false);\n\n      if (discussion) {\n        discussion.pushAttributes({\n          votes: post.votes(),\n        });\n      }\n\n      m.redraw();\n    });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/abbreviateNumber'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostUser'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","export default function rankLabel(rank, attrs = {}) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'rankLabel ' + (attrs.className || '');\n\n  const color = rank.color();\n  attrs.style.backgroundColor = attrs.style.color = color;\n  attrs.className += ' colored';\n\n  return m('span', attrs, <span className=\"rankLabel-text\">{rank.name()}</span>);\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport PostUser from 'flarum/forum/components/PostUser';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport rankLabel from '../common/helpers/rankLabel';\nimport setting from './helpers/setting';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default function () {\n  const matchClass = (className) => {\n    return (node) => node && node.attrs && node.attrs.className && String(node.attrs.className).split(' ').includes(className);\n  };\n\n  const matchTag = (tagName) => {\n    return (node) => node && node.tag && node.tag === tagName;\n  };\n\n  const findMatchClass = function (node, className) {\n    const arr = [];\n\n    if (node && node.children && Array.isArray(node.children)) {\n      const nodeInChildren = node.children.find(matchClass(className));\n\n      if (nodeInChildren) {\n        arr.push(nodeInChildren);\n      }\n\n      node.children.forEach(function (currentValue) {\n        arr.push(...findMatchClass(currentValue, className));\n      });\n    }\n\n    return arr;\n  };\n\n  extend(UserCard.prototype, 'infoItems', function (items) {\n    const user = this.attrs.user;\n\n    items.add(\n      'points',\n      <div>\n        {icon('fas fa-medal')}\n        {app.translator.trans('fof-gamification.forum.user.card.points', {\n          count: user.points(),\n        })}\n      </div>,\n      50\n    );\n  });\n\n  extend(UserCard.prototype, 'view', function (vnode) {\n    const user = this.attrs.user;\n    const profile_node = findMatchClass(vnode, 'UserCard-profile')[0];\n    const amt = Number(setting('rankAmt'));\n\n    if (!profile_node) return;\n\n    let badges_node = profile_node.children.find(matchClass('UserCard-badges'));\n    if (user.ranks()) {\n      if (!badges_node) {\n        profile_node.children.splice(\n          1,\n          0,\n          <ul className=\"UserCard-badges badges\">\n            {user\n              .ranks()\n              .reverse()\n              .map((rank, i) => {\n                if (!amt || i < amt) {\n                  return <li className=\"User-Rank\">{rankLabel(rank)}</li>;\n                }\n              })}\n          </ul>\n        );\n      } else {\n        user\n          .ranks()\n          .reverse()\n          .map((rank, i) => {\n            if (!amt || i < amt) {\n              return <li className=\"User-Rank\">{rankLabel(rank)}</li>;\n            }\n          })\n          .forEach((rank) => {\n            if (!rank) {\n              return;\n            }\n            badges_node.children.push(rank);\n          });\n      }\n    }\n\n    return vnode;\n  });\n\n  extend(PostUser.prototype, 'view', function (vnode) {\n    const post = this.attrs.post;\n    const user = post.user();\n\n    if (!user) {\n      return vnode;\n    }\n\n    const header_node = vnode.children.find(matchTag('h3'));\n    const amt = Number(setting('rankAmt')) ?? user.ranks().length;\n\n    header_node.children = header_node.children\n      .concat(\n        user\n          .ranks()\n          .reverse()\n          .splice(0, amt)\n          .map((rank) => {\n            return <span className=\"Post-Rank\">{rankLabel(rank)}</span>;\n          })\n      )\n      .filter(function (el) {\n        return el.tag !== undefined;\n      });\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\n\nimport debounce from 'lodash.debounce';\n\nconst fetch = (postId) => app.store.find('posts', postId).then(() => m.redraw());\nconst debounced = [];\nconst update = (postId) => {\n  let func = debounced[postId];\n\n  if (func) return func(postId);\n\n  func = debounced[postId] = debounce(fetch, 1500);\n\n  return func(postId);\n};\n\nexport default () => {\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    if (app.pusher) {\n      app.pusher.then((channels) => {\n        channels.pusher.bind('newVote', (data) => {\n          const post = app.store.getById('posts', data.post_id);\n          const userId = data.user_id;\n\n          if (!post || post.votes() === data.votes || userId == app.session.user.id()) return;\n\n          update(post.id());\n        });\n      });\n    }\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    if (app.pusher) {\n      app.pusher.then((channels) => {\n        channels.pusher.unbind('newVote');\n      });\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\n\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nimport saveVote from './helpers/saveVote';\nimport setting from './helpers/setting';\n\nconst get = (discussion, key) => {\n  const post = discussion.firstPost();\n\n  if (post && post[key]() !== undefined) {\n    return post[key]();\n  }\n\n  return discussion[key]();\n};\n\nexport default function addAlternateLayout() {\n  extend(DiscussionListItem.prototype, 'oninit', function () {\n    const discussion = this.attrs.discussion;\n\n    if (!discussion.seeVotes()) {\n      return;\n    }\n\n    this.subtree.check(() => this.voteLoading);\n  });\n\n  extend(DiscussionListItem.prototype, 'view', function (vdom) {\n    const discussion = this.attrs.discussion;\n\n    if (!discussion.seeVotes()) {\n      return;\n    }\n\n    if (!vdom || !vdom.children) return;\n\n    const content = vdom.children.find((v) => v && v.attrs && v.attrs.className && v.attrs.className.includes('DiscussionListItem-content'));\n    const post = discussion.firstPost();\n\n    const hasUpvoted = get(discussion, 'hasUpvoted');\n    const hasDownvoted = get(discussion, 'hasDownvoted');\n    // We set canVote to true for guest users so that they can access the login by clicking the button\n    const canVote = !app.session.user || get(discussion, 'canVote');\n\n    const upvotesOnly = setting('upVotesOnly', true);\n    const altIcon = setting('iconNameAlt') || 'arrow';\n\n    const onclick = (upvoted, downvoted) => saveVote(post, upvoted, downvoted, (val) => (this.voteLoading = val));\n\n    content.children.unshift(\n      <div className=\"DiscussionListItem-votes alternateLayout\" data-upvotes-only={upvotesOnly}>\n        <Button\n          className=\"DiscussionListItem-voteButton DiscussionListItem-voteButton--up Button Button--icon Button--text\"\n          icon={`fas fa-fw fa-${altIcon}-up`}\n          data-active={hasUpvoted}\n          disabled={!canVote || this.voteLoading}\n          onclick={() => onclick(!hasUpvoted, false)}\n          aria-label={app.translator.trans('fof-gamification.forum.post.upvote_button')}\n        />\n\n        <span class=\"DiscussionListItem-voteCount\">{abbreviateNumber(get(discussion, 'votes') || 0)}</span>\n\n        {!upvotesOnly && (\n          <Button\n            className=\"DiscussionListItem-voteButton DiscussionListItem-voteButton--down Button Button--icon Button--text\"\n            icon={`fas fa-fw fa-${altIcon}-down`}\n            data-active={hasDownvoted}\n            disabled={!canVote || this.voteLoading}\n            onclick={() => onclick(false, !hasDownvoted)}\n            aria-label={app.translator.trans('fof-gamification.forum.post.downvote_button')}\n          />\n        )}\n\n        {this.voteLoading && <LoadingIndicator display=\"inline\" size=\"small\" />}\n      </div>\n    );\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport setting from '../helpers/setting';\n\nexport default class UpvotedNotification extends Notification {\n  icon() {\n    const icon = setting('iconName') || 'thumbs';\n\n    if (this.attrs.notification.content() > 0) {\n      return `fas fa-${icon}-up`;\n    } else {\n      return `fas fa-${icon}-down`;\n    }\n  }\n\n  href() {\n    return app.route.post(this.attrs.notification.subject());\n  }\n\n  content() {\n    const user = this.attrs.notification.fromUser();\n    const content = parseInt(this.attrs.notification.content());\n\n    if (content > 0) {\n      return app.translator.trans('fof-gamification.forum.notification.upvote', { user });\n    } else {\n      return app.translator.trans('fof-gamification.forum.notification.downvote', { user });\n    }\n  }\n\n  excerpt() {\n    return this.attrs.notification.subject().contentPlain();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/SubtreeRetainer'];","import app from 'flarum/forum/app';\n\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Link from 'flarum/common/components/Link';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport avatar from 'flarum/common/helpers/avatar';\nimport icon from 'flarum/common/helpers/icon';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\n\nimport type Mithril from 'mithril';\n\nexport default class Voters extends Component {\n  subtreeRetainer!: SubtreeRetainer;\n  lastRenderVotes: number = -1;\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.loading = !this.attrs.post.upvotes();\n\n    if (this.loading) {\n      this.load();\n    }\n\n    this.subtreeRetainer = new SubtreeRetainer(\n      () => this.loading,\n      () => this.attrs.post.votes(),\n      () => this.attrs.post?.upvotes?.()?.length\n    );\n  }\n\n  onbeforeupdate(vnode: Mithril.Vnode) {\n    super.onbeforeupdate(vnode);\n\n    return this.subtreeRetainer.needsRebuild();\n  }\n\n  onupdate(vnode: Mithril.Vnode) {\n    if (this.lastRenderVotes !== this.attrs.post.votes()) {\n      this.loading = true;\n      setTimeout(() => m.redraw(), 0);\n      this.lastRenderVotes = this.attrs.post.votes();\n      this.load();\n    }\n  }\n\n  view() {\n    // if (this.loading) {\n    if (this.attrs.post.votes() === false || this.attrs.post.upvotes() === false) {\n      return (\n        <div className=\"VotingContainer\">\n          <div className=\"FoFGamification-voters\">\n            <div className=\"FoFGamification-voters-title\">\n              <span className=\"FoFGamification-voters-title-icon\">\n                {icon('fas fa-users')}\n                <span className=\"FoFGamification-voters-title-label\">{app.translator.trans('fof-gamification.forum.voters.label')}</span>\n                <span className=\"FoFGamification-voters-title-label FoFGamification-voters-title-label--mobile\">\n                  {app.translator.trans('fof-gamification.forum.voters.label')}\n                </span>\n              </span>\n            </div>\n\n            <LoadingIndicator display=\"inline\" />\n          </div>\n        </div>\n      );\n    }\n\n    const max = 15;\n    const voters = this.attrs.post.upvotes();\n\n    return (\n      <div className=\"VotingContainer\">\n        <div className=\"FoFGamification-voters\">\n          <div className=\"FoFGamification-voters-title\">\n            <span className=\"FoFGamification-voters-title-icon\">\n              {icon('fas fa-users')}\n              <span className=\"FoFGamification-voters-title-label\">{app.translator.trans('fof-gamification.forum.voters.label')}</span>\n              <span className=\"FoFGamification-voters-title-label FoFGamification-voters-title-label--mobile\">\n                {voters.length === 0\n                  ? app.translator.trans('fof-gamification.forum.voters.label_none')\n                  : app.translator.trans('fof-gamification.forum.voters.label')}\n              </span>\n            </span>\n          </div>\n          <div className=\"FoFGamification-voters-message\">\n            {voters.length === 0 ? app.translator.trans('fof-gamification.forum.voters.none') : null}\n          </div>\n          <div className=\"FoFGamification-voters-list\">\n            {voters.slice(0, max).map((user: any) => (\n              <Link href={app.route('user', { username: user.slug() })} className=\"FoFGamification-voters-item\">\n                <Tooltip text={user.displayName()}>{avatar(user)}</Tooltip>\n              </Link>\n            ))}\n            {voters.length > max ? (\n              <span className=\"FoFGamification-voters-item FoFGamification-voters-item--plus\">\n                <span className=\"Avatar\">{`+${voters.length - max}`}</span>\n              </span>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async load() {\n    await app.store.find('posts', this.attrs.post.id(), {\n      include: 'upvotes',\n    });\n\n    this.loading = false;\n\n    m.redraw();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostsUserPage'];","import app from 'flarum/forum/app';\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\n\n/**\n * The `VotesUserPage` component shows posts which user voted on.\n */\nexport default class VotesUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param offset The position to start getting results from.\n   * @protected\n   */\n  loadResults(offset: number) {\n    return app.store.find('posts', {\n      filter: {\n        type: 'comment',\n        voted: this.user.id(),\n      },\n      page: { offset, limit: this.loadLimit },\n      sort: '-createdAt',\n    });\n  }\n}\n","import RankingsPage from './RankingsPage';\nimport VoteNotification from './VoteNotification';\nimport VotesModal from './VotesModal';\nimport Voters from './Voters';\n\nexport const components = {\n  RankingsPage,\n  VoteNotification,\n  VotesModal,\n  Voters,\n};\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import rankLabel from './rankLabel';\n\nexport const helpers = {\n  rankLabel,\n};\n","import saveVote from './saveVote';\nimport setting from './setting';\n\nimport { helpers as commonHelpers } from '../../common/helpers';\n\nexport const helpers = {\n  saveVote,\n  setting,\n  ...commonHelpers,\n};\n","import app from 'flarum/forum/app';\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Post from 'flarum/common/models/Post';\nimport User from 'flarum/common/models/User';\n\nimport Rank from '../common/models/Rank';\n\nimport RankingsPage from './components/RankingsPage';\n\nimport addHotnessSort from './addHotnessSort';\nimport addVoteButtons from './addVoteButtons';\nimport addUpvotesToDiscussion from './addUpvotesToDiscussion';\nimport addUserInfo from './addUserInfo';\nimport addPusher from './addPusher';\nimport addAlternateLayout from './addAlternateLayout';\n\nimport setting from './helpers/setting';\nimport addVotesSort from './addVotesSort';\nimport useAlternatePostVoteLayout from './useAlternatePostVoteLayout';\nimport addNotifications from './addNotifications';\nimport addVotersToDiscussionPageSideBar from './addVotersToDiscussionPageSideBar';\nimport addUpvoteTabToUserProfile from './addUpvoteTabToUserProfile';\n\napp.initializers.add('fof-gamification', () => {\n  Discussion.prototype.votes = Model.attribute('votes');\n  Discussion.prototype.hasUpvoted = Model.attribute('hasUpvoted');\n  Discussion.prototype.hasDownvoted = Model.attribute('hasDownvoted');\n  Discussion.prototype.canVote = Model.attribute('canVote');\n  Discussion.prototype.seeVotes = Model.attribute('seeVotes');\n\n  User.prototype.points = Model.attribute('points');\n  User.prototype.ranks = Model.hasMany('ranks');\n  User.prototype.canHaveVotingNotifications = Model.attribute('canHaveVotingNotifications');\n\n  Post.prototype.upvotes = Model.hasMany('upvotes');\n  Post.prototype.downvotes = Model.hasMany('downvotes');\n\n  Post.prototype.votes = Model.attribute('votes');\n  Post.prototype.canVote = Model.attribute('canVote');\n  Post.prototype.canSeeVotes = Model.attribute('canSeeVotes');\n  Post.prototype.hasUpvoted = Model.attribute('hasUpvoted');\n  Post.prototype.hasDownvoted = Model.attribute('hasDownvoted');\n  Post.prototype.seeVoters = Model.attribute('seeVoters');\n\n  app.store.models.ranks = Rank;\n\n  app.routes.rankings = { path: '/rankings', component: RankingsPage };\n\n  addVoteButtons();\n  addHotnessSort();\n  addVotesSort();\n  addUserInfo();\n  addUpvotesToDiscussion();\n  addPusher();\n  addNotifications();\n  addVotersToDiscussionPageSideBar();\n  addUpvoteTabToUserProfile();\n\n  if (setting('useAlternateLayout', true)) {\n    addAlternateLayout();\n  }\n\n  if (setting('altPostVotingUi', true)) {\n    useAlternatePostVoteLayout();\n  }\n});\n\nexport * from './components';\nexport * from './helpers';\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport classList from 'flarum/common/utils/classList';\nimport PostControls from 'flarum/forum/utils/PostControls';\n\nimport VotesModal from './components/VotesModal';\nimport setting from './helpers/setting';\nimport saveVote from './helpers/saveVote';\n\nexport default function () {\n  extend(PostControls, 'moderationControls', function (items, post) {\n    if (post.seeVoters()) {\n      items.add('viewVotes', [\n        m(\n          Button,\n          {\n            icon: 'fas fa-thumbs-up',\n            onclick: () => {\n              app.modal.show(VotesModal, { post });\n            },\n          },\n          app.translator.trans('fof-gamification.forum.mod_item')\n        ),\n      ]);\n    }\n  });\n\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n    const post = this.attrs.post;\n\n    //if (!post.canVote()) return;\n\n    const hasDownvoted = post.hasDownvoted();\n    const hasUpvoted = post.hasUpvoted();\n\n    const icon = setting('iconName') || 'thumbs';\n    const upVotesOnly = setting('upVotesOnly', true);\n\n    const canSeeVotes = post.canSeeVotes();\n\n    // We set canVote to true for guest users so that they can access the login by clicking the button\n    const canVote = !app.session.user || post.canVote();\n\n    const onclick = (upvoted, downvoted) => saveVote(post, upvoted, downvoted, (val) => (this.voteLoading = val));\n\n    items.add(\n      'votes',\n      <div className={classList('CommentPost-votes', setting('useAlternateLayout', true) && 'alternateLayout')}>\n        {Button.component({\n          icon: this.voteLoading ? undefined : `fas fa-fw fa-${icon}-up`,\n          className: classList('Post-vote Post-upvote', hasUpvoted && 'Post-vote--active'),\n          loading: this.voteLoading,\n          disabled: this.voteLoading || !canVote || !canSeeVotes,\n          onclick: () => onclick(!hasUpvoted, false),\n          'aria-label': app.translator.trans('fof-gamification.forum.post.upvote_button'),\n        })}\n\n        <label className=\"Post-points\">{post.votes()}</label>\n\n        {!upVotesOnly &&\n          Button.component({\n            icon: this.voteLoading ? undefined : `fas fa-fw fa-${icon}-down`,\n            className: classList('Post-vote Post-downvote', hasDownvoted && 'Post-vote--active'),\n            loading: this.voteLoading,\n            disabled: !canVote || !canSeeVotes,\n            onclick: () => onclick(false, !hasDownvoted),\n            'aria-label': app.translator.trans('fof-gamification.forum.post.downvote_button'),\n          })}\n      </div>,\n      10\n    );\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function () {\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    if (!app.forum.attribute('canViewRankingPage')) {\n      return;\n    }\n\n    items.add(\n      'rankings',\n      LinkButton.component(\n        {\n          href: app.route('rankings'),\n          icon: 'fas fa-trophy',\n        },\n        app.translator.trans('fof-gamification.forum.nav.name')\n      ),\n      80\n    );\n  });\n\n  extend(DiscussionListState.prototype, 'sortMap', function (map) {\n    map.hot = '-hotness';\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport DiscussionListState from 'flarum/common/states/DiscussionListState';\n\nexport default function () {\n  extend(DiscussionListState.prototype, 'sortMap', function (map) {\n    map.votes = '-votes';\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport icon from 'flarum/common/helpers/icon';\nimport setting from './helpers/setting';\n\nexport default function () {\n  if (!setting('showVotesOnDiscussionPage', true) || setting('useAlternateLayout', true)) {\n    return;\n  }\n\n  extend(DiscussionListItem.prototype, 'elementAttrs', function (attrs) {\n    if (!this.attrs.discussion.seeVotes()) {\n      return;\n    }\n\n    attrs.className += ' DiscussionListItem--withVotes';\n  });\n\n  extend(DiscussionListItem.prototype, 'infoItems', function (items) {\n    const discussion = this.attrs.discussion;\n\n    if (!discussion.seeVotes()) {\n      return;\n    }\n\n    items.add(\n      'discussion-votes',\n      <span className=\"DiscussionListItem-votes\" title={app.translator.trans('fof-gamification.forum.votes')}>\n        {icon('far fa-thumbs-up')}\n        {abbreviateNumber(this.attrs.discussion.votes())}\n      </span>,\n      20\n    );\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport VoteNotification from './components/VoteNotification';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport default function addNotifications() {\n  app.notificationComponents.vote = VoteNotification;\n\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items: ItemList<{ name: string; icon: string; label: any }>) {\n    const user = app.session?.user;\n\n    if (!user?.canHaveVotingNotifications?.()) return;\n\n    items.add('vote', {\n      name: 'vote',\n      icon: 'fas fa-thumbs-up',\n      label: app.translator.trans('fof-gamification.forum.notification.prefrences.vote'),\n    });\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Voters from './components/Voters';\nimport type ItemList from 'flarum/common/utils/ItemList';\n\nimport type Mithril from 'mithril';\n\n/**\n * Adds our custom {@link Voters} component to the discussion sidebar.\n */\nexport default function addVotersToDiscussionPageSideBar() {\n  extend(DiscussionPage.prototype, 'sidebarItems', function (this: DiscussionPage, items: ItemList<Mithril.Chilren>) {\n    const discussion = this.discussion;\n    const posts = discussion!.posts() || [];\n    const firstPost = posts?.[0];\n\n    if (firstPost?.canSeeVotes?.() && firstPost?.seeVoters?.() && !!app.forum.attribute('fof-gamification-op-votes-only')) {\n      items.add('op-voters', <Voters post={firstPost} />, 90);\n    }\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport VotesUserPage from './components/VotesUserPage';\nimport setting from './helpers/setting';\n\nexport default function addUpvoteTabToUserProfile() {\n  app.routes['user.votes'] = { path: '/u/:username/votes', component: VotesUserPage };\n  extend(UserPage.prototype, 'navItems', function (items) {\n    const user = this.user;\n    const icon = setting('iconName') || 'thumbs';\n    items.add(\n      'votes',\n      <LinkButton href={app.route('user.votes', { username: user.slug() })} name=\"votes\" icon={`fas fa-fw fa-${icon}-up`}>\n        {app.translator.trans('fof-gamification.forum.user.votes_link')}\n      </LinkButton>,\n      85\n    );\n  });\n}\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\n\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Button from 'flarum/common/components/Button';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport type ItemList from 'flarum/common/utils/ItemList';\n\nimport setting from './helpers/setting';\nimport saveVote from './helpers/saveVote';\n\nexport default function useAlternatePostVoteLayout() {\n  extend(CommentPost.prototype, 'actionItems', function (this: CommentPost, items: ItemList) {\n    if (this.attrs.post.isHidden()) return;\n\n    items.remove('votes');\n  });\n\n  extend(CommentPost.prototype, 'classes', function (this: CommentPost, classes: string[]) {\n    if (this.attrs.post.isHidden()) return;\n\n    const upvotesOnly = setting('upVotesOnly', true);\n\n    classes.push('votesAlternativeLayout');\n\n    if (upvotesOnly) {\n      classes.push('votesUpvotesOnly');\n    }\n  });\n\n  extend(CommentPost.prototype, 'headerItems', function (this: CommentPost, items: ItemList) {\n    const post = this.attrs.post;\n\n    if (post.isHidden()) return;\n    if (!post.canSeeVotes()) return;\n\n    const hasDownvoted = post.hasDownvoted();\n    const hasUpvoted = post.hasUpvoted();\n\n    const icon = setting('iconName') || 'thumbs';\n    const upvotesOnly = setting('upVotesOnly', true);\n\n    const canSeeVotes = post.canSeeVotes();\n\n    // We set canVote to true for guest users so that they can access the login by clicking the button\n    const canVote = !app.session.user || post.canVote();\n\n    const onclick = (upvoted, downvoted) =>\n      saveVote(post, upvoted, downvoted, (val) => {\n        this.voteLoading = val;\n      });\n\n    items.add(\n      'votes',\n      <div className=\"Post-votes alternateLayout\" data-upvotes-only={upvotesOnly}>\n        <Button\n          className=\"Post-voteButton Post-voteButton--up Button Button--icon Button--text\"\n          icon={`fas fa-fw fa-${icon}-up`}\n          data-active={hasUpvoted}\n          disabled={!canVote || this.voteLoading || !canSeeVotes}\n          onclick={() => onclick(!hasUpvoted, false)}\n          aria-label={app.translator.trans('fof-gamification.forum.post.upvote_button')}\n        />\n\n        <span class=\"Post-voteCount\">{abbreviateNumber(post.votes() || 0)}</span>\n\n        {!upvotesOnly && (\n          <Button\n            className=\"Post-voteButton Post-voteButton--down Button Button--icon Button--text\"\n            icon={`fas fa-fw fa-${icon}-down`}\n            data-active={hasDownvoted}\n            disabled={!canVote || this.voteLoading}\n            onclick={() => onclick(false, !hasDownvoted)}\n            aria-label={app.translator.trans('fof-gamification.forum.post.downvote_button')}\n          />\n        )}\n\n        {this.voteLoading && <LoadingIndicator display=\"inline\" size=\"small\" />}\n      </div>,\n      10000\n    );\n  });\n}\n"],"names":["reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","global","Object","freeSelf","self","root","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","isObject","value","type","toNumber","isObjectLike","call","isSymbol","other","valueOf","replace","isBinary","test","slice","module","exports","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","cancel","clearTimeout","flush","_typeof","require","_regeneratorRuntime","__esModule","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","g","e","window","prop","r","_setPrototypeOf","p","bind","_inheritsLoose","subClass","superClass","flarum","core","compat","Rank","_mixin","mixin","Model","points","color","models","RankingImage","_Component","view","imgUrl","app","attribute","attrs","place","m","className","src","alt","icon","Component","RankingsPage","_Page","_proto","oninit","vnode","route","set","loading","users","refresh","_this","LoadingIndicator","Button","onclick","loadMore","trans","IndexPage","hero","listItems","sidebarItems","toArray","class","map","user","addOrdinalSuffix","Link","href","force","avatar","username","clear","_this2","loadResults","results","parseResults","redraw","locale","j","k","offset","params","page","limit","find","sort","b","parseFloat","Page","VotesModal","_Modal","title","post","upvotes","downvotes","load","content","voters","id","include","loaded","Modal","isBool","val","upvoted","downvoted","discussion","canVote","save","pushAttributes","votes","DiscussionControls","rankLabel","rank","style","backgroundColor","matchClass","node","String","split","includes","findMatchClass","arr","children","Array","isArray","nodeInChildren","currentValue","extend","UserCard","items","add","count","profile_node","amt","Number","setting","badges_node","ranks","splice","PostUser","_Number","header_node","tag","concat","filter","el","fetch","postId","firstPost","UpvotedNotification","_Notification","notification","subject","fromUser","excerpt","contentPlain","Notification","asyncGeneratorStep","gen","_next","_throw","Voters","_len","_key","subtreeRetainer","lastRenderVotes","SubtreeRetainer","_this2$attrs$post","_this2$attrs$post$upv","onbeforeupdate","needsRebuild","onupdate","display","slug","Tooltip","text","_load","_callee","_context","VotesUserPage","_PostsUserPage","voted","loadLimit","PostsUserPage","components","VoteNotification","_extends","assign","target","source","helpers","saveVote","Discussion","hasUpvoted","hasDownvoted","seeVotes","User","canHaveVotingNotifications","Post","canSeeVotes","seeVoters","rankings","path","component","PostControls","show","CommentPost","upVotesOnly","voteLoading","classList","disabled","LinkButton","DiscussionListState","hot","addUserInfo","DiscussionListItem","abbreviateNumber","DiscussionPage","channels","pusher","data","getById","post_id","userId","user_id","debounce","unbind","vote","NotificationGrid","_app$session","label","posts","UserPage","subtree","check","vdom","v","upvotesOnly","altIcon","unshift","size","isHidden","remove","classes"],"sourceRoot":""}