(()=>{var t={554:(t,o,e)=>{var n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,r=parseInt,c="object"==typeof e.g&&e.g&&e.g.Object===Object&&e.g,m="object"==typeof self&&self&&self.Object===Object&&self,u=c||m||Function("return this")(),f=Object.prototype.toString,l=Math.max,d=Math.min,p=function(){return u.Date.now()};function g(t){var o=typeof t;return!!t&&("object"==o||"function"==o)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(g(t)){var o="function"==typeof t.valueOf?t.valueOf():t;t=g(o)?o+"":o}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var e=a.test(t);return e||i.test(t)?r(t.slice(2),e?2:8):s.test(t)?NaN:+t}t.exports=function(t,o,e){var n,s,a,i,r,c,m=0,u=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(o){var e=n,a=s;return n=s=void 0,m=o,i=t.apply(a,e)}function y(t){var e=t-c;return void 0===c||e>=o||e<0||f&&t-m>=a}function N(){var t=p();if(y(t))return w(t);r=setTimeout(N,function(t){var e=o-(t-c);return f?d(e,a-(t-m)):e}(t))}function w(t){return r=void 0,h&&n?b(t):(n=s=void 0,i)}function k(){var t=p(),e=y(t);if(n=arguments,s=this,c=t,e){if(void 0===r)return function(t){return m=t,r=setTimeout(N,o),u?b(t):i}(c);if(f)return r=setTimeout(N,o),b(c)}return void 0===r&&(r=setTimeout(N,o)),i}return o=v(o)||0,g(e)&&(u=!!e.leading,a=(f="maxWait"in e)?l(v(e.maxWait)||0,o):a,h="trailing"in e?!!e.trailing:h),k.cancel=function(){void 0!==r&&clearTimeout(r),m=0,n=c=s=r=void 0},k.flush=function(){return void 0===r?i:w(p())},k}}},o={};function e(n){flarum.reg._webpack_runtimes["fof-gamification"]||=e;var s=o[n];if(void 0!==s)return s.exports;var a=o[n]={exports:{}};return t[n](a,a.exports,e),a.exports}e.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},e.d=(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";e.r(n),e.d(n,{extend:()=>At});const t=flarum.reg.get("core","forum/app");var o=e.n(t);const s=flarum.reg.get("core","forum/components/IndexSidebar");var a=e.n(s);const i=flarum.reg.get("core","common/extend"),r=flarum.reg.get("core","forum/components/IndexPage");var c=e.n(r);const u=flarum.reg.get("core","forum/states/DiscussionListState");var f=e.n(u);const l=flarum.reg.get("core","common/components/LinkButton");var d=e.n(l);const p=flarum.reg.get("core","common/components/Button");var g=e.n(p);const v=flarum.reg.get("core","forum/components/CommentPost");var h=e.n(v);const b=flarum.reg.get("core","common/utils/classList");var y=e.n(b);const N=flarum.reg.get("core","forum/utils/PostControls");var w=e.n(N);const k=flarum.reg.get("core","common/components/Modal");var x=e.n(k);const P=flarum.reg.get("core","common/components/LoadingIndicator");var V=e.n(P);const L=flarum.reg.get("core","common/components/Avatar");var F=e.n(L);const I=flarum.reg.get("core","common/helpers/username");var S=e.n(I);const U=flarum.reg.get("core","common/components/Link");var B=e.n(U);class R extends(x()){className(){return"VotesModal Modal--small"}title(){return o().translator.trans("fof-gamification.forum.modal.title")}oninit(t){super.oninit(t),this.loading=!this.attrs.post.upvotes()||!this.attrs.post.downvotes(),this.loading&&this.load()}content(){return this.loading?m("div",{className:"Modal-body"},m(V(),null)):m("div",{className:"Modal-body"},m("ul",{className:"VotesModal-list"},["upvotes","downvotes"].map((t=>{const e=this.attrs.post[t]();if(e&&e.length)return m("div",null,m("legend",null,o().translator.trans(`fof-gamification.forum.modal.${t}_label`)),e.map((t=>m("li",null,m(B(),{href:o().route.user(t)},m(F(),{user:t})," ",S()(t))))))}))))}load(){return o().store.find("posts",this.attrs.post.id(),{include:"upvotes,downvotes"}).then(this.loaded.bind(this))}}flarum.reg.add("fof-gamification","forum/components/VotesModal",R);const M=flarum.reg.get("core","forum/utils/DiscussionControls");var O=e.n(M);const j=function(t,e,n,s,a){if(void 0===a&&(a=t.discussion()),!o().session.user)return void O().replyAction.call(a,!0);if(a&&!a.canVote()&&!t.canVote())return;let i;switch(e&&n&&(e=!1,n=!1),!0){case e&&n||!e&&!n:i=null;break;case e:i="up";break;case n:i="down"}return s&&s(!0),m.redraw(),t.save({vote:i}).then((()=>null),(()=>null)).then((()=>{s&&s(!1),a&&a.pushAttributes({votes:t.votes()}),m.redraw()}))},D=flarum.reg.get("core","forum/components/DiscussionListItem");var G=e.n(D);const _=flarum.reg.get("core","common/utils/abbreviateNumber");var A=e.n(_);const $=flarum.reg.get("core","common/components/Icon");var C=e.n($);const T=flarum.reg.get("core","forum/components/PostUser");var H=e.n(T);const E=flarum.reg.get("core","forum/components/UserCard");var z=e.n(E);function W(t,o){void 0===o&&(o={}),o.style=o.style||{},o.className="rankLabel "+(o.className||"");const e=t.color();return o.style.backgroundColor=o.style.color=e,o.className+=" colored",m("span",o,m("span",{className:"rankLabel-text"},t.name()))}flarum.reg.add("fof-gamification","common/helpers/rankLabel",W);const q=flarum.reg.get("core","forum/components/DiscussionPage");var K=e.n(q),J=e(554),Q=e.n(J);const X=t=>o().store.find("posts",t).then((()=>m.redraw())),Y=[],Z=(t,o)=>{const e=t.firstPost();return e&&void 0!==e[o]()?e[o]():t[o]()},tt=flarum.reg.get("core","forum/components/Notification");var ot=e.n(tt);class et extends(ot()){icon(){const t=o().forum.attribute("fof-gamification.iconName");return this.attrs.notification.content()>0?`fas fa-${t}-up`:`fas fa-${t}-down`}href(){return o().route.post(this.attrs.notification.subject())}content(){const t=this.attrs.notification.fromUser();return parseInt(this.attrs.notification.content())>0?o().translator.trans("fof-gamification.forum.notification.upvote",{user:t}):o().translator.trans("fof-gamification.forum.notification.downvote",{user:t})}excerpt(){return this.attrs.notification.subject().contentPlain()}}function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function st(t,o,e){return(o=function(t){var o=function(t){if("object"!=nt(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var e=o.call(t,"string");if("object"!=nt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nt(o)?o:o+""}(o))in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}flarum.reg.add("fof-gamification","forum/components/VoteNotification",et);const at=flarum.reg.get("core","common/Component");var it=e.n(at);const rt=flarum.reg.get("core","common/components/Tooltip");var ct=e.n(rt);const mt=flarum.reg.get("core","common/utils/SubtreeRetainer");var ut=e.n(mt);class ft extends(it()){constructor(){super(...arguments),st(this,"subtreeRetainer",void 0),st(this,"lastRenderVotes",-1),st(this,"loading",!1)}oninit(t){super.oninit(t),this.loading=!this.attrs.post.upvotes(),this.loading&&this.load(),this.subtreeRetainer=new(ut())((()=>this.loading),(()=>this.attrs.post.votes()),(()=>this.attrs.post?.upvotes?.()?.length))}onbeforeupdate(t){return super.onbeforeupdate(t),this.subtreeRetainer.needsRebuild()}onupdate(){this.lastRenderVotes!==this.attrs.post.votes()&&(this.loading=!0,setTimeout((()=>m.redraw()),0),this.lastRenderVotes=this.attrs.post.votes(),this.load())}view(){if(this.loading||!this.attrs.post.upvotes())return m("div",{className:"VotingContainer"},m("div",{className:"FoFGamification-voters"},m("div",{className:"FoFGamification-voters-title"},m("span",{className:"FoFGamification-voters-title-icon"},m(C(),{name:"fas fa-users"}),m("span",{className:"FoFGamification-voters-title-label"},o().translator.trans("fof-gamification.forum.voters.label")),m("span",{className:"FoFGamification-voters-title-label FoFGamification-voters-title-label--mobile"},o().translator.trans("fof-gamification.forum.voters.label")))),m(V(),{display:"inline"})));const t=this.attrs.post.upvotes();return m("div",{className:"VotingContainer"},m("div",{className:"FoFGamification-voters"},m("div",{className:"FoFGamification-voters-title"},m("span",{className:"FoFGamification-voters-title-icon"},m(C(),{name:"fas fa-users"}),m("span",{className:"FoFGamification-voters-title-label"},o().translator.trans("fof-gamification.forum.voters.label")),m("span",{className:"FoFGamification-voters-title-label FoFGamification-voters-title-label--mobile"},0===t.length?o().translator.trans("fof-gamification.forum.voters.label_none"):o().translator.trans("fof-gamification.forum.voters.label")))),m("div",{className:"FoFGamification-voters-message"},0===t.length?o().translator.trans("fof-gamification.forum.voters.none"):null),m("div",{className:"FoFGamification-voters-list"},t.slice(0,15).map((t=>m(B(),{href:o().route("user",{username:t.slug()}),className:"FoFGamification-voters-item"},m(ct(),{text:t.displayName()},m(F(),{user:t}))))),t.length>15?m("span",{className:"FoFGamification-voters-item FoFGamification-voters-item--plus"},m("span",{className:"Avatar"},"+"+(t.length-15))):null)))}async load(){const t=this.attrs.post.id();t&&(await o().store.find("posts",t,{include:"upvotes"}),this.loading=!1,m.redraw())}}flarum.reg.add("fof-gamification","forum/components/Voters",ft);const lt=flarum.reg.get("core","forum/components/UserPage");var dt=e.n(lt);const pt=flarum.reg.get("core","forum/components/PostsUserPage");var gt=e.n(pt);class vt extends(gt()){loadResults(t){const e={filter:{type:"comment",...this.user?.id()&&{voted:this.user.id()}},page:{offset:t,limit:this.loadLimit},sort:"-createdAt"};return o().store.find("posts",e)}}flarum.reg.add("fof-gamification","forum/components/VotesUserPage",vt);const ht=flarum.reg.get("core","common/extenders");var bt=e.n(ht);const yt=flarum.reg.get("core","common/Model");var Nt=e.n(yt);class wt extends(Nt()){points(){return Nt().attribute("points").call(this)}name(){return Nt().attribute("name").call(this)}color(){return Nt().attribute("color").call(this)}}flarum.reg.add("fof-gamification","common/models/Rank",wt);const kt=flarum.reg.get("core","common/app");var xt=e.n(kt);const Pt=flarum.reg.get("core","common/query/IGambit");class Vt extends Pt.BooleanGambit{key(){return xt().translator.trans("fof-gamification.lib.gambits.hot.key",{},!0)}filterKey(){return"hot"}}flarum.reg.add("fof-gamification","common/gambits/HotGambit",Vt);const Lt=[(new(bt().Store)).add("ranks",wt),(new(bt().Search)).gambit("discussions",Vt)],Ft=flarum.reg.get("core","forum/components/PageStructure");var It=e.n(Ft);const St=flarum.reg.get("core","common/components/Page");var Ut=e.n(St);flarum.reg.get("core","common/helpers/listItems");class Bt extends(it()){view(){const t=o().forum.attribute(`fof-gamification.topimage${this.attrs.place}Url`),e=this.attrs.place;return t?m("img",{className:`rankings-mobile rankings-image rankings-${e}`,src:t,alt:""}):m("td",{className:`rankings-mobile rankings-${e}`},m(C(),{name:"fas fa-trophy"}))}}flarum.reg.add("fof-gamification","forum/components/RankingImage",Bt);class Rt extends(Ut()){oninit(t){super.oninit(t),o().forum.attribute("canViewRankingPage")||m.route.set("/"),this.loading=!0,this.users=[],this.refresh()}view(){let t;return t=this.loading?V().component():g().component({className:"Button",onclick:this.loadMore.bind(this)},o().translator.trans("core.forum.discussion_list.load_more_button")),m(It(),{className:"RankingsPage",hero:()=>c().prototype.hero(),sidebar:()=>m(a(),null)},m("table",{class:"rankings"},m("tr",null,m("th",{className:"rankings-mobile"},o().translator.trans("fof-gamification.forum.ranking.rank")),m("th",null,o().translator.trans("fof-gamification.forum.ranking.name")),m("th",null,o().translator.trans("fof-gamification.forum.ranking.amount"))),this.users.map(((t,e)=>(++e,[m("tr",{className:"ranking-"+e},e<4?m(Bt,{place:e}):m("td",{className:"rankings-4 rankings-mobile"},this.addOrdinalSuffix(e)),m("td",null,m("div",{className:"PostUser"},m("h3",{className:"PostUser-name rankings-info"},m(B(),{href:o().route.user(t),force:!0},e<4?m(F(),{user:t,className:"info-avatar rankings-"+e+"-avatar"}):""," ",S()(t))))),e<4?m("td",{className:"rankings-"+e},t.points()):m("td",{className:"rankings-4"},t.points()))])))),m("div",{className:"rankings-loadmore"}," ",t))}refresh(t){return void 0===t&&(t=!0),t&&(this.loading=!0,this.users=[]),this.loadResults().then((t=>{this.users=[],this.parseResults(t)}),(()=>{this.loading=!1,m.redraw()}))}addOrdinalSuffix(t){if("en"===o().data.locale){const o=t%10,e=t%100;return 1===o&&11!==e?t+"st":2===o&&12!==e?t+"nd":3===o&&13!==e?t+"rd":t+"th"}return t}loadResults(t){const e={};return e.page={filter:{rankable:!0},include:"ranks",sort:"-votes",offset:t,limit:"10"},o().store.find("users",e)}loadMore(){this.loading=!0,this.loadResults(this.users.length).then(this.parseResults.bind(this))}parseResults(t){return[].push.apply(this.users,t),this.loading=!1,this.users.sort((function(t,o){return parseFloat(o.points())-parseFloat(t.points())})),m.redraw(),t}}flarum.reg.add("fof-gamification","forum/components/RankingsPage",Rt);const Mt=flarum.reg.get("core","common/models/Discussion");var Ot=e.n(Mt);const jt=flarum.reg.get("core","common/models/Post");var Dt=e.n(jt);const Gt=flarum.reg.get("core","common/models/User");var _t=e.n(Gt);const At=[...Lt,(new(bt().Routes)).add("rankings","/rankings",Rt),new(bt().Model)(Ot()).attribute("votes").attribute("hasUpvoted").attribute("hasDownvoted").attribute("canVote").attribute("seeVotes"),new(bt().Model)(Dt()).hasMany("upvotes").hasMany("downvotes").attribute("votes").attribute("canVote").attribute("canSeeVotes").attribute("hasUpvoted").attribute("hasDownvoted").attribute("seeVoters"),new(bt().Model)(_t()).attribute("points").hasMany("ranks").attribute("canHaveVotingNotifications")];o().initializers.add("fof-gamification",(()=>{(0,i.extend)(w(),"moderationControls",(function(t,e){e.seeVoters()&&t.add("viewVotes",[m(g(),{icon:"fas fa-thumbs-up",onclick:()=>{o().modal.show(R,{post:e})}},o().translator.trans("fof-gamification.forum.mod_item"))])})),(0,i.extend)(h().prototype,"actionItems",(function(t){const e=this.attrs.post,n=e.hasDownvoted(),s=e.hasUpvoted(),a=o().forum.attribute("fof-gamification.iconName"),i=o().forum.attribute("fof-gamification.upVotesOnly"),r=e.canSeeVotes(),c=!o().session.user||e.canVote(),u=(t,o)=>j(e,t,o,(t=>this.voteLoading=t));t.add("votes",m("div",{className:y()("CommentPost-votes",o().forum.attribute("fof-gamification.useAlternateLayout")&&"alternateLayout")},g().component({icon:this.voteLoading?void 0:`fas fa-fw fa-${a}-up`,className:y()("Post-vote Post-upvote",s&&"Post-vote--active"),loading:this.voteLoading,disabled:this.voteLoading||!c||!r,onclick:()=>u(!s,!1),"aria-label":o().translator.trans("fof-gamification.forum.post.upvote_button")}),m("label",{className:"Post-points"},e.votes()),!i&&g().component({icon:this.voteLoading?void 0:`fas fa-fw fa-${a}-down`,className:y()("Post-vote Post-downvote",n&&"Post-vote--active"),loading:this.voteLoading,disabled:!c||!r,onclick:()=>u(!1,!n),"aria-label":o().translator.trans("fof-gamification.forum.post.downvote_button")})),10)})),(0,i.extend)(a().prototype,"navItems",(function(t){o().forum.attribute("canViewRankingPage")&&t.add("rankings",d().component({href:o().route("rankings"),icon:"fas fa-trophy"},o().translator.trans("fof-gamification.forum.nav.name")),80)})),(0,i.extend)(f().prototype,"sortMap",(function(t){t.hot="-hotness"})),(0,i.extend)(f().prototype,"sortMap",(function(t){t.votes="-votes"})),function(){const t=t=>o=>o&&o.attrs&&o.attrs.className&&String(o.attrs.className).split(" ").includes(t),e=function(o,n){const s=[];if(o&&o.children&&Array.isArray(o.children)){const a=o.children.find(t(n));a&&s.push(a),o.children.forEach((function(t){s.push(...e(t,n))}))}return s};(0,i.extend)(z().prototype,"infoItems",(function(t){const e=this.attrs.user;t.add("points",m("div",null,m(C(),{name:"fas fa-medal"}),o().translator.trans("fof-gamification.forum.user.card.points",{count:e.points()})),50)})),(0,i.extend)(z().prototype,"view",(function(n){const s=this.attrs.user,a=e(n,"UserCard-profile")[0],i=o().forum.attribute("fof-gamification.rankAmt")??s.ranks().length;if(!a)return;let r=a.children.find(t("UserCard-badges"));return s.ranks()&&(r?s.ranks().reverse().map(((t,o)=>{if(!i||o<i)return m("li",{className:"User-Rank"},W(t))})).forEach((t=>{t&&r.children.push(t)})):a.children.splice(1,0,m("ul",{className:"UserCard-badges badges"},s.ranks().reverse().map(((t,o)=>{if(!i||o<i)return m("li",{className:"User-Rank"},W(t))}))))),n})),(0,i.extend)(H().prototype,"view",(function(e){const n=this.attrs.post.user();if(!n)return e;const s=e.children.find(t("PostUser-name")),a=o().forum.attribute("fof-gamification.rankAmt")??n.ranks().length;n.ranks()&&(s.children=s.children.concat(n.ranks().reverse().splice(0,a).map((t=>m("span",{className:"Post-Rank"},W(t))))).filter((function(t){return void 0!==t.tag})))}))}(),(0,i.extend)(G().prototype,"elementAttrs",(function(t){this.attrs.discussion.seeVotes()&&o().forum.attribute("fof-gamification.showVotesOnDiscussionPage")&&!o().forum.attribute("fof-gamification.useAlternateLayout")&&(t.className+=" DiscussionListItem--withVotes")})),(0,i.extend)(G().prototype,"infoItems",(function(t){o().forum.attribute("fof-gamification.showVotesOnDiscussionPage")&&!o().forum.attribute("fof-gamification.useAlternateLayout")&&this.attrs.discussion.seeVotes()&&t.add("discussion-votes",m("span",{className:"DiscussionListItem-votes",title:o().translator.trans("fof-gamification.forum.votes")},m(C(),{name:"far fa-thumbs-up"}),A()(this.attrs.discussion.votes())),20)})),(0,i.extend)(K().prototype,"oncreate",(function(){o().pusher&&o().pusher.then((t=>{t.pusher.bind("newVote",(t=>{const e=o().store.getById("posts",t.post_id),n=t.user_id;e&&e.votes()!==t.votes&&n!=o().session.user.id()&&(t=>{let o=Y[t];o||(o=Y[t]=Q()(X,1500)),o(t)})(e.id())}))}))})),(0,i.extend)(K().prototype,"onremove",(function(){o().pusher&&o().pusher.then((t=>{t.pusher.unbind("newVote")}))})),o().notificationComponents.vote=et,(0,i.extend)("flarum/forum/components/NotificationGrid","notificationTypes",(function(t){const e=o().session?.user;e?.canHaveVotingNotifications?.()&&t.add("vote",{name:"vote",icon:"fas fa-thumbs-up",label:o().translator.trans("fof-gamification.forum.notification.prefrences.vote")})})),(0,i.extend)(K().prototype,"sidebarItems",(function(t){const e=this.discussion.posts()||[],n=e?.[0];n?.canSeeVotes?.()&&n?.seeVoters?.()&&o().forum.attribute("fof-gamification.firstPostOnly")&&t.add("op-voters",m(ft,{post:n}),90)})),o().routes["user.votes"]={path:"/u/:username/votes",component:vt},(0,i.extend)(dt().prototype,"navItems",(function(t){const e=this.user,n=o().forum.attribute("fof-gamification.iconName");t.add("votes",m(d(),{href:o().route("user.votes",{username:e.slug()}),name:"votes",icon:`fas fa-fw fa-${n}-up`},o().translator.trans("fof-gamification.forum.user.votes_link")),85)})),(0,i.extend)(G().prototype,"oninit",(function(){o().forum.attribute("fof-gamification.useAlternateLayout")||this.attrs.discussion.seeVotes()&&this.subtree.check((()=>this.voteLoading))})),(0,i.extend)(G().prototype,"contentItems",(function(t){if(!o().forum.attribute("fof-gamification.useAlternateLayout"))return;const e=this.attrs.discussion;if(!e.seeVotes())return;const n=e.firstPost(),s=Z(e,"hasUpvoted"),a=Z(e,"hasDownvoted"),i=!o().session.user||Z(e,"canVote"),r=o().forum.attribute("fof-gamification.upVotesOnly"),c=o().forum.attribute("fof-gamification.iconNameAlt"),u=(t,o)=>j(n,t,o,(t=>this.voteLoading=t));t.add("votes-alt",m("div",{className:"DiscussionListItem-votes alternateLayout","data-upvotes-only":r},m(g(),{className:"DiscussionListItem-voteButton DiscussionListItem-voteButton--up Button Button--icon Button--text",icon:`fas fa-fw fa-${c}-up`,"data-active":s,disabled:!i||this.voteLoading,onclick:()=>u(!s,!1),"aria-label":o().translator.trans("fof-gamification.forum.post.upvote_button")}),m("span",{class:"DiscussionListItem-voteCount"},A()(Z(e,"votes")||0)),!r&&m(g(),{className:"DiscussionListItem-voteButton DiscussionListItem-voteButton--down Button Button--icon Button--text",icon:`fas fa-fw fa-${c}-down`,"data-active":a,disabled:!i||this.voteLoading,onclick:()=>u(!1,!a),"aria-label":o().translator.trans("fof-gamification.forum.post.downvote_button")}),this.voteLoading&&m(V(),{display:"inline",size:"small"})),110)})),(0,i.extend)(h().prototype,"actionItems",(function(t){o().forum.attribute("fof-gamification.altPostVotingUi")&&(this.attrs.post.isHidden()||t.remove("votes"))})),(0,i.extend)(h().prototype,"classes",(function(t){if(!o().forum.attribute("fof-gamification.altPostVotingUi"))return;if(this.attrs.post.isHidden())return;const e=o().forum.attribute("fof-gamification.upVotesOnly");t.push("votesAlternativeLayout"),e&&t.push("votesUpvotesOnly")})),(0,i.extend)(h().prototype,"oninit",(function(){o().forum.attribute("fof-gamification.altPostVotingUi")&&(this.voteLoading=!1)})),(0,i.extend)(h().prototype,"sideItems",(function(t){if(!o().forum.attribute("fof-gamification.altPostVotingUi"))return;const e=this.attrs.post;if(e.isHidden())return;if(!e.canSeeVotes())return;const n=e.hasDownvoted(),s=e.hasUpvoted(),a=o().forum.attribute("fof-gamification.iconName"),i=o().forum.attribute("fof-gamification.upVotesOnly"),r=e.canSeeVotes(),c=!o().session.user||e.canVote(),u=(t,o)=>j(e,t,o,(t=>{this.voteLoading=t}));t.add("votes",m("div",{className:"Post-votes alternateLayout","data-upvotes-only":i},m(g(),{className:"Post-voteButton Post-voteButton--up Button Button--icon Button--text",icon:`fas fa-fw fa-${a}-up`,"data-active":s,disabled:!c||this.voteLoading||!r,onclick:()=>u(!s,!1),"aria-label":o().translator.trans("fof-gamification.forum.post.upvote_button")}),m("span",{class:"Post-voteCount"},A()(e.votes()||0)),!i&&m(g(),{className:"Post-voteButton Post-voteButton--down Button Button--icon Button--text",icon:`fas fa-fw fa-${a}-down`,"data-active":n,disabled:!c||this.voteLoading,onclick:()=>u(!1,!n),"aria-label":o().translator.trans("fof-gamification.forum.post.downvote_button")}),this.voteLoading&&m(V(),{display:"inline",size:"small"})))}))}))})(),module.exports=n})();
//# sourceMappingURL=forum.js.map