{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/gamification/webpack/bootstrap","webpack://@fof/gamification/webpack/runtime/compat get default export","webpack://@fof/gamification/webpack/runtime/define property getters","webpack://@fof/gamification/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/gamification/webpack/runtime/make namespace object","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@fof/gamification/./src/common/models/Rank.ts","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/app')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/query/IGambit')\"","webpack://@fof/gamification/./src/common/gambits/HotGambit.tsx","webpack://@fof/gamification/./src/common/extend.ts","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'admin/utils/saveSettings')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/withAttr')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Form')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'admin/components/FormSection')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'admin/components/FormSectionGroup')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/UploadImageButton')\"","webpack://@fof/gamification/./src/admin/components/UploadImageButton.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/gamification/./node_modules/flarum-webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Select')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/models/Group')\"","webpack://@fof/gamification/./src/admin/components/GroupSettings.tsx","webpack://@fof/gamification/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@fof/gamification/./src/admin/components/SettingsPage.js","webpack://@fof/gamification/./src/admin/extend.ts","webpack://@fof/gamification/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import Model from 'flarum/common/Model';\nexport default class Rank extends Model {\n  points() {\n    return Model.attribute('points').call(this);\n  }\n  name() {\n    return Model.attribute('name').call(this);\n  }\n  color() {\n    return Model.attribute('color').call(this);\n  }\n}\nflarum.reg.add('fof-gamification', 'common/models/Rank', Rank);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/query/IGambit');","import app from 'flarum/common/app';\nimport { BooleanGambit } from 'flarum/common/query/IGambit';\nexport default class HotGambit extends BooleanGambit {\n  key() {\n    return app.translator.trans('fof-gamification.lib.gambits.hot.key', {}, true);\n  }\n  filterKey() {\n    return 'hot';\n  }\n}\nflarum.reg.add('fof-gamification', 'common/gambits/HotGambit', HotGambit);","import Extend from 'flarum/common/extenders';\nimport Rank from './models/Rank';\nimport HotGambit from './gambits/HotGambit';\nexport default [new Extend.Store() //\n.add('ranks', Rank), new Extend.Search() //\n.gambit('discussions', HotGambit)];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/utils/saveSettings');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/withAttr');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Form');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/FormSection');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/FormSectionGroup');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/UploadImageButton');","import app from 'flarum/admin/app';\nimport FlarumUploadImageButton from 'flarum/common/components/UploadImageButton';\nexport default class UploadImageButton extends FlarumUploadImageButton {\n  resourceUrl() {\n    return app.forum.attribute('apiUrl') + '/' + this.attrs.path;\n  }\n}\nflarum.reg.add('fof-gamification', 'admin/components/UploadImageButton', UploadImageButton);","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Select');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Tooltip');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/extractText');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Group');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport extractText from 'flarum/common/utils/extractText';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Stream from 'flarum/common/utils/Stream';\nimport Group from 'flarum/common/models/Group';\nexport default class GroupSettings extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"newGroupId\", Stream(''));\n    _defineProperty(this, \"newMinPoints\", Stream(''));\n    _defineProperty(this, \"newMaxPoints\", Stream(''));\n  }\n  view() {\n    let entries = [];\n    try {\n      entries = JSON.parse(this.attrs.value);\n    } catch (error) {\n      // silence errors. Will reset to empty array below\n    }\n    if (!Array.isArray(entries)) {\n      entries = [];\n    }\n    let groupOptions = {};\n    app.store.all('groups').forEach(group => {\n      // Don't allow Member or Guest since those are virtual, and don't allow Admin as it's too dangerous and could strip admins of their roles\n      if ([Group.ADMINISTRATOR_ID, Group.MEMBER_ID, Group.GUEST_ID].indexOf(group.id()) !== -1) {\n        return;\n      }\n      groupOptions[group.id()] = group.nameSingular();\n    });\n    const addHandler = () => {\n      const newEntry = {\n        groupId: parseInt(this.newGroupId())\n      };\n      if (this.newMinPoints()) {\n        newEntry.minPoints = parseInt(this.newMinPoints());\n      }\n      if (this.newMaxPoints()) {\n        newEntry.maxPoints = parseInt(this.newMaxPoints());\n      }\n      entries.push(newEntry);\n      this.attrs.onchange(JSON.stringify(entries));\n      this.newGroupId('');\n      this.newMinPoints('');\n      this.newMaxPoints('');\n    };\n    return m(\"table\", null, m(\"thead\", null, m(\"tr\", null, m(\"th\", null, app.translator.trans('fof-gamification.admin.page.groups.column.group')), m(\"th\", null, app.translator.trans('fof-gamification.admin.page.groups.column.minPoints')), m(\"th\", null, app.translator.trans('fof-gamification.admin.page.groups.column.maxPoints')))), m(\"tbody\", null, entries.map((entry, entryIndex) => {\n      const valueChangeHandler = attribute => {\n        return value => {\n          if (value === '') {\n            delete entry[attribute];\n          } else {\n            entry[attribute] = parseInt(value);\n          }\n          this.attrs.onchange(JSON.stringify(entries));\n        };\n      };\n      const deleteHandler = () => {\n        entries.splice(entryIndex, 1);\n        this.attrs.onchange(JSON.stringify(entries));\n      };\n      return m(\"tr\", null, m(\"td\", null, m(Select, {\n        options: groupOptions,\n        value: entry.groupId + '',\n        onchange: valueChangeHandler('groupId')\n      })), m(\"td\", null, m(\"input\", {\n        className: \"FormControl\",\n        type: \"number\",\n        value: entry.minPoints || '',\n        onchange: withAttr('value', valueChangeHandler('minPoints'))\n      })), m(\"td\", null, m(\"input\", {\n        className: \"FormControl\",\n        type: \"number\",\n        value: entry.maxPoints || '',\n        onchange: withAttr('value', valueChangeHandler('maxPoints'))\n      })), m(\"td\", null, m(Tooltip, {\n        text: extractText(app.translator.trans('fof-gamification.admin.page.groups.delete'))\n      }, m(Button, {\n        className: \"Button Button--icon\",\n        icon: \"fas fa-times\",\n        onclick: deleteHandler\n      }, \"Delete\"))));\n    }), m(\"tr\", null, m(\"td\", null, m(Select, {\n      options: groupOptions,\n      value: this.newGroupId(),\n      onchange: this.newGroupId\n    })), m(\"td\", null, m(\"input\", {\n      className: \"FormControl\",\n      type: \"number\",\n      bidi: this.newMinPoints\n    })), m(\"td\", null, m(\"input\", {\n      className: \"FormControl\",\n      type: \"number\",\n      bidi: this.newMaxPoints\n    })), m(\"td\", null, m(Tooltip, {\n      text: extractText(app.translator.trans('fof-gamification.admin.page.groups.add'))\n    }, m(Button, {\n      className: \"Button Button--icon\",\n      icon: \"fas fa-plus\",\n      onclick: addHandler,\n      disabled: !this.newGroupId()\n    }, \"Add\"))))));\n  }\n}\nflarum.reg.add('fof-gamification', 'admin/components/GroupSettings', GroupSettings);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Switch from 'flarum/common/components/Switch';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Stream from 'flarum/common/utils/Stream';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Form from 'flarum/common/components/Form';\nimport FormSection from 'flarum/admin/components/FormSection';\nimport FormSectionGroup from 'flarum/admin/components/FormSectionGroup';\nimport UploadImageButton from './UploadImageButton';\nimport GroupSettings from './GroupSettings';\nimport Icon from 'flarum/common/components/Icon';\nexport default class SettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.fields = ['convertedLikes', 'amountPerPost', 'amountPerDiscussion', 'postStartAmount', 'rankAmt', 'iconName', 'blockedUsers', 'iconNameAlt', 'autoAssignedGroups'];\n    this.switches = ['autoUpvotePosts', 'customRankingImages', 'rateLimit', 'showVotesOnDiscussionPage', 'useAlternateLayout', 'altPostVotingUi', 'upVotesOnly', 'firstPostOnly', 'allowSelfVotes'];\n    this.ranks = app.store.all('ranks');\n    this.values = {};\n    this.settingsPrefix = 'fof-gamification';\n    const settings = app.data.settings;\n    this.fields.forEach(key => this.values[key] = Stream(settings[this.addPrefix(key)]));\n    this.switches.forEach(key => this.values[key] = Stream(!!Number(settings[this.addPrefix(key)])));\n    this.newRank = {\n      points: Stream(''),\n      name: Stream(''),\n      color: Stream('')\n    };\n  }\n\n  /**\n   * @returns {*}\n   */\n  content() {\n    return m(\"div\", {\n      className: \"SettingsPage\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"form\", {\n      onsubmit: this.onsubmit.bind(this)\n    }, this.settingsItems().toArray())));\n  }\n  updateName(rank, value) {\n    rank.save({\n      name: value\n    });\n  }\n  updatePoints(rank, value) {\n    rank.save({\n      points: value\n    });\n  }\n  updateColor(rank, value) {\n    rank.save({\n      color: value\n    });\n  }\n  deleteRank(rankToDelete) {\n    rankToDelete.delete();\n    this.ranks.some((rank, i) => {\n      if (rank.data.id === rankToDelete.data.id) {\n        this.ranks.splice(i, 1);\n        return true;\n      }\n    });\n  }\n  addRank() {\n    app.store.createRecord('ranks').save({\n      points: this.newRank.points(),\n      name: this.newRank.name(),\n      color: this.newRank.color()\n    }).then(rank => {\n      this.newRank.color('');\n      this.newRank.name('');\n      this.newRank.points('');\n      this.ranks.push(rank);\n      m.redraw();\n    });\n  }\n\n  /**\n   *\n   * @returns boolean\n   */\n  changed() {\n    var switchesCheck = this.switches.some(key => this.values[key]() !== (app.data.settings[this.addPrefix(key)] == '1'));\n    var fieldsCheck = this.fields.some(key => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n    return fieldsCheck || switchesCheck;\n  }\n  prepareSubmissionData() {\n    const settings = {};\n    this.switches.forEach(key => settings[this.addPrefix(key)] = this.values[key]());\n    this.fields.forEach(key => settings[this.addPrefix(key)] = this.values[key]());\n    return settings;\n  }\n\n  /**\n   * @param e\n   */\n  onsubmit(e) {\n    e.preventDefault();\n    if (this.loading) return;\n    this.loading = true;\n    app.alerts.dismiss(this.successAlert);\n    saveSettings(this.prepareSubmissionData()).then(this.onsaved.bind(this)).then(() => window.location.reload()).catch(console.error).then(() => {\n      this.loading = false;\n    });\n  }\n\n  /**\n   * @returns string\n   */\n  addPrefix(key) {\n    return this.settingsPrefix + '.' + key;\n  }\n  settingsItems() {\n    const items = new ItemList();\n    items.add('convertLikesToUpvotes', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-gamification.admin.page.convert.help')), this.values.convertedLikes() === undefined ? m(Button, {\n      type: \"button\",\n      className: \"Button Button--warning Ranks-button\",\n      \"aria-label\": app.translator.trans('fof-gamification.admin.page.convert.button'),\n      onclick: () => {\n        app.request({\n          url: app.forum.attribute('apiUrl') + '/fof/gamification/convert',\n          method: 'POST'\n        }).then(this.values.convertedLikes('converting'));\n      }\n    }, app.translator.trans('fof-gamification.admin.page.convert.button')) : this.values.convertedLikes() === 'converting' ? m(\"label\", null, app.translator.trans('fof-gamification.admin.page.convert.converting')) : m(\"label\", null, \" \", app.translator.trans('fof-gamification.admin.page.convert.converted', {\n      number: this.values.convertedLikes()\n    }))), 100);\n    items.add('firstSectionGroup', m(FormSectionGroup, null, this.firstSectionGroupItems().toArray()), 80);\n    items.add('secondSectionGroup', m(FormSectionGroup, null, this.secondSectionGroupItems().toArray()), 70);\n    items.add('submit', m(Button, {\n      type: \"submit\",\n      className: \"Button Button--primary Ranks-save\",\n      loading: this.loading,\n      disabled: !this.changed()\n    }, app.translator.trans('fof-gamification.admin.page.save_settings')), 0);\n    return items;\n  }\n  firstSectionGroupItems() {\n    const items = new ItemList();\n    items.add('ranks', m(FormSection, {\n      label: app.translator.trans('fof-gamification.admin.page.ranks.title'),\n      className: \"SettingsPage-ranks\"\n    }, m(Form, null, this.rankItems().toArray())), 90);\n    items.add('voteSettings', m(FormSection, {\n      label: app.translator.trans('fof-gamification.admin.page.votes.title')\n    }, m(Form, null, this.voteItems().toArray())), 80);\n    return items;\n  }\n  secondSectionGroupItems() {\n    const items = new ItemList();\n    items.add('rankingsPage', m(FormSection, {\n      label: app.translator.trans('fof-gamification.admin.page.rankings.title')\n    }, this.rankingsItems().toArray()), 70);\n    items.add('groups', m(FormSection, {\n      label: app.translator.trans('fof-gamification.admin.page.groups.title'),\n      className: \"SettingsPage-groups\"\n    }, m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-gamification.admin.page.groups.help')), m(GroupSettings, {\n      value: this.values.autoAssignedGroups(),\n      onchange: this.values.autoAssignedGroups\n    })), 60);\n    return items;\n  }\n  rankItems() {\n    const items = new ItemList();\n    items.add('ranks', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('fof-gamification.admin.page.ranks.ranks')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-gamification.admin.page.ranks.help.help')), this.ranks.length > 0 ? m(\"div\", {\n      className: \"Ranks--Container\"\n    }, this.ranks.map(rank => m(\"div\", {\n      className: \"Ranks--Container-row\"\n    }, m(\"input\", {\n      className: \"FormControl Ranks-number\",\n      type: \"number\",\n      value: rank.points(),\n      placeholder: app.translator.trans('fof-gamification.admin.page.ranks.help.points'),\n      oninput: withAttr('value', this.updatePoints.bind(this, rank))\n    }), m(\"input\", {\n      className: \"FormControl Ranks-name\",\n      value: rank.name(),\n      placeholder: app.translator.trans('fof-gamification.admin.page.ranks.help.name'),\n      oninput: withAttr('value', this.updateName.bind(this, rank))\n    }), m(\"input\", {\n      className: \"FormControl Ranks-color\",\n      value: rank.color(),\n      placeholder: app.translator.trans('fof-gamification.admin.page.ranks.help.color'),\n      oninput: withAttr('value', this.updateColor.bind(this, rank))\n    }), m(Button, {\n      type: \"button\",\n      className: \"Button Button--warning Button--icon Ranks-button\",\n      icon: \"fa fa-times\",\n      onclick: this.deleteRank.bind(this, rank)\n    })))) : null, m(\"div\", {\n      className: \"Ranks--Container-row\"\n    }, m(\"input\", {\n      className: \"FormControl Ranks-number\",\n      value: this.newRank.points(),\n      placeholder: app.translator.trans('fof-gamification.admin.page.ranks.help.points'),\n      type: \"number\",\n      oninput: withAttr('value', this.newRank.points)\n    }), m(\"input\", {\n      className: \"FormControl Ranks-name\",\n      value: this.newRank.name(),\n      placeholder: app.translator.trans('fof-gamification.admin.page.ranks.help.name'),\n      oninput: withAttr('value', this.newRank.name)\n    }), m(\"input\", {\n      className: \"FormControl Ranks-color\",\n      value: this.newRank.color(),\n      placeholder: app.translator.trans('fof-gamification.admin.page.ranks.help.color'),\n      oninput: withAttr('value', this.newRank.color)\n    }), m(Button, {\n      type: \"button\",\n      className: \"Button Button--primary Button--icon Ranks-button\",\n      icon: \"fa fa-plus\",\n      \"aria-label\": \"add\",\n      onclick: this.addRank.bind(this)\n    }))), 100);\n    items.add('rankNumbers', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('fof-gamification.admin.page.ranks.number_title')), m(\"input\", {\n      className: \"FormControl Ranks-default\",\n      value: this.values.rankAmt(),\n      type: \"number\",\n      min: \"0\",\n      oninput: withAttr('value', this.values.rankAmt)\n    })), 80);\n    return items;\n  }\n  voteItems() {\n    const items = new ItemList();\n    items.add('icon', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('fof-gamification.admin.page.votes.icon_name')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.icon_help')), m(\"input\", {\n      className: \"FormControl Ranks-default\",\n      value: this.values.iconName() || '',\n      oninput: withAttr('value', this.values.iconName)\n    }), this.values.iconName() && m(\"div\", {\n      className: \"IconPreview\"\n    }, m(\"span\", null, m(Icon, {\n      name: `fas fa-fw fa-${this.values.iconName()}-up`\n    }), m(\"span\", null, app.translator.trans('fof-gamification.admin.page.votes.icon_preview_upvote'))), m(\"span\", null, m(Icon, {\n      name: `fas fa-fw fa-${this.values.iconName()}-down`\n    }), m(\"span\", null, app.translator.trans('fof-gamification.admin.page.votes.icon_preview_downvote'))))), 100);\n    items.add('altIcon', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('fof-gamification.admin.page.alt_votes.icon_name')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.icon_help')), m(\"input\", {\n      className: \"FormControl Ranks-default\",\n      value: this.values.iconNameAlt() || '',\n      oninput: withAttr('value', this.values.iconNameAlt)\n    }), this.values.iconNameAlt() && m(\"div\", {\n      className: \"IconPreview\"\n    }, m(\"span\", null, m(Icon, {\n      name: `fas fa-fw fa-${this.values.iconNameAlt()}-up`\n    }), m(\"span\", null, app.translator.trans('fof-gamification.admin.page.votes.icon_preview_upvote'))), m(\"span\", null, m(Icon, {\n      name: `fas fa-fw fa-${this.values.iconNameAlt()}-down`\n    }), m(\"span\", null, app.translator.trans('fof-gamification.admin.page.votes.icon_preview_downvote'))))), 90);\n    items.add('autoUpvote', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.autoUpvotePosts() || false,\n      onchange: this.values.autoUpvotePosts,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.auto_upvote'))), 80);\n    items.add('rateLimit', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.rateLimit() || false,\n      onchange: this.values.rateLimit,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.rate_limit'))), 70);\n    items.add('opVotesOnDiscussionList', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.showVotesOnDiscussionPage() || false,\n      onchange: this.values.showVotesOnDiscussionPage,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.discussion_page'))), 60);\n    items.add('altDiscussionListLayout', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.useAlternateLayout() || false,\n      onchange: this.values.useAlternateLayout,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.alternate_layout'))), 50);\n    items.add('altPostLayout', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.altPostVotingUi() || false,\n      onchange: this.values.altPostVotingUi,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.alternate_post_layout'))), 40);\n    items.add('upvotesOnly', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.upVotesOnly() || false,\n      onchange: this.values.upVotesOnly,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.upvotes_only'))), 30);\n    items.add('firstPostOnly', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.firstPostOnly() || false,\n      onchange: this.values.firstPostOnly,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.first_post_only'))), 20);\n    items.add('allowSelfVotes', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.allowSelfVotes(),\n      onchange: this.values.allowSelfVotes,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.votes.allow_self_votes'))), 10);\n    return items;\n  }\n  rankingsItems() {\n    const items = new ItemList();\n    items.add('customImages', m(\"div\", {\n      className: \"Form-group\"\n    }, m(Switch, {\n      state: this.values.customRankingImages() || false,\n      onchange: this.values.customRankingImages,\n      className: \"votes-switch\"\n    }, app.translator.trans('fof-gamification.admin.page.rankings.enable'))), 100);\n    items.add('ignoredUsers', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('fof-gamification.admin.page.rankings.blocked.title')), m(\"input\", {\n      className: \"FormControl Ranks-blocked\",\n      placeholder: app.translator.trans('fof-gamification.admin.page.rankings.blocked.placeholder'),\n      value: this.values.blockedUsers() || '',\n      oninput: withAttr('value', this.values.blockedUsers)\n    })), 90);\n    items.add('customImages', m('[', null, [1, 2, 3].map(num => m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", {\n      className: \"Upload-label\"\n    }, app.translator.trans(`fof-gamification.admin.page.rankings.custom_image_${num}`)), m(UploadImageButton, {\n      className: \"Upload-button\",\n      name: `fof-gamification.topimage${num}`,\n      path: `fof/gamification/topimage${num}`,\n      \"aria-label\": app.translator.trans(`fof-gamification.admin.page.rankings.custom_image_${num}`)\n    }), m(\"br\", null)))), 80);\n    return items;\n  }\n}\nflarum.reg.add('fof-gamification', 'admin/components/SettingsPage', SettingsPage);","import app from 'flarum/admin/app';\nimport Extend from 'flarum/common/extenders';\nimport { default as commonExtend } from '../common/extend';\nimport SettingsPage from './components/SettingsPage';\nexport default [...commonExtend, new Extend.Admin() //\n.page(SettingsPage).permission(() => ({\n  icon: 'fas fa-thumbs-up',\n  label: app.translator.trans('fof-gamification.admin.permissions.vote_label'),\n  permission: 'discussion.votePosts'\n}), 'reply').permission(() => ({\n  icon: 'fas fa-thumbs-up',\n  label: app.translator.trans('fof-gamification.admin.permissions.see_votes_label'),\n  permission: 'discussion.canSeeVotes',\n  allowGuest: true\n}), 'view').permission(() => ({\n  icon: 'fas fa-info-circle',\n  label: app.translator.trans('fof-gamification.admin.permissions.see_voters_label'),\n  permission: 'discussion.canSeeVoters',\n  allowGuest: true\n}), 'view').permission(() => ({\n  icon: 'fas fa-trophy',\n  label: app.translator.trans('fof-gamification.admin.permissions.see_ranking_page'),\n  permission: 'fof.gamification.viewRankingPage',\n  allowGuest: true\n}), 'view').permission(() => ({\n  icon: 'fas fa-bell',\n  label: app.translator.trans('fof-gamification.admin.permissions.upvote_notifications'),\n  permission: 'discussion.upvote_notifications'\n}), 'view').permission(() => ({\n  icon: 'fas fa-bell',\n  label: app.translator.trans('fof-gamification.admin.permissions.downvote_notifications'),\n  permission: 'discussion.downvote_notifications'\n}), 'view')];","import app from 'flarum/admin/app';\nexport { default as extend } from './extend';\napp.initializers.add('fof-gamification', () => {\n  //\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","Rank","points","this","name","color","add","HotGambit","BooleanGambit","trans","filterKey","gambit","UploadImageButton","resourceUrl","attribute","attrs","path","_typeof","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","configurable","writable","GroupSettings","super","arguments","view","entries","JSON","parse","error","Array","isArray","groupOptions","all","forEach","group","indexOf","id","nameSingular","m","map","entry","entryIndex","valueChangeHandler","parseInt","onchange","stringify","options","groupId","className","type","minPoints","maxPoints","text","icon","onclick","splice","newGroupId","bidi","newMinPoints","newMaxPoints","newEntry","push","disabled","SettingsPage","oninit","vnode","fields","switches","ranks","values","settingsPrefix","settings","addPrefix","Number","newRank","content","onsubmit","bind","settingsItems","toArray","updateName","rank","save","updatePoints","updateColor","deleteRank","rankToDelete","delete","some","data","addRank","createRecord","then","redraw","changed","switchesCheck","prepareSubmissionData","preventDefault","loading","dismiss","successAlert","onsaved","window","location","reload","catch","console","items","undefined","convertedLikes","url","method","number","firstSectionGroupItems","secondSectionGroupItems","label","rankItems","voteItems","rankingsItems","autoAssignedGroups","length","placeholder","oninput","rankAmt","min","iconName","iconNameAlt","state","autoUpvotePosts","rateLimit","showVotesOnDiscussionPage","useAlternateLayout","altPostVotingUi","upVotesOnly","firstPostOnly","allowSelfVotes","customRankingImages","blockedUsers","num","page","permission","allowGuest"],"sourceRoot":""}